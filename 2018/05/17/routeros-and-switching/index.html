<!DOCTYPE html>
<html lang="en-US" itemscope itemtype="http://schema.org/WebPage"><head><meta charset="UTF-8"><title>RouterOS and Switching, finally managed – blog.kroy.io</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="dns-prefetch" href="//s.w.org"><script type="text/javascript" data-cfasync="false">
	var em_version         = '6.1.0';
	var em_track_user      = true;
	var em_no_track_reason = '';
	
	var disableStr = 'ga-disable-UA-89722449-1';

	/* Function to detect opted out users */
	function __gaTrackerIsOptedOut() {
		return document.cookie.indexOf(disableStr + '=true') > -1;
	}

	/* Disable tracking if the opt-out cookie exists. */
	if ( __gaTrackerIsOptedOut() ) {
		window[disableStr] = true;
	}

	/* Opt-out function */
	function __gaTrackerOptout() {
	  document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
	  window[disableStr] = true;
	}

	if ( 'undefined' === typeof gaOptout ) {
		function gaOptout() {
			__gaTrackerOptout();
		}
	}
	
	if ( em_track_user ) {
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','__gaTracker');

window.ga = __gaTracker;		__gaTracker('create', 'UA-89722449-1', 'auto');
		__gaTracker('set', 'forceSSL', true);
		__gaTracker('send','pageview');
		__gaTracker( function() { window.ga = __gaTracker; } );
	} else {
		console.log( "" );
		(function() {
			/* https://developers.google.com/analytics/devguides/collection/analyticsjs/ */
			var noopfn = function() {
				return null;
			};
			var noopnullfn = function() {
				return null;
			};
			var Tracker = function() {
				return null;
			};
			var p = Tracker.prototype;
			p.get = noopfn;
			p.set = noopfn;
			p.send = noopfn;
			var __gaTracker = function() {
				var len = arguments.length;
				if ( len === 0 ) {
					return;
				}
				var f = arguments[len-1];
				if ( typeof f !== 'object' || f === null || typeof f.hitCallback !== 'function' ) {
					console.log( 'Not running function __gaTracker(' + arguments[0] + " ....) because you are not being tracked. " + em_no_track_reason );
					return;
				}
				try {
					f.hitCallback();
				} catch (ex) {

				}
			};
			__gaTracker.create = function() {
				return new Tracker();
			};
			__gaTracker.getByName = noopnullfn;
			__gaTracker.getAll = function() {
				return [];
			};
			__gaTracker.remove = noopfn;
			window['__gaTracker'] = __gaTracker;
			window.ga = __gaTracker;		})();
		}
</script><style type="text/css" media="all">
.wpautoterms-footer{background-color:#ffffff;text-align:center;}
.wpautoterms-footer a{color:#000000;font-family:Arial, sans-serif;font-size:14px;}
.wpautoterms-footer .separator{color:#cccccc;font-family:Arial, sans-serif;font-size:14px;}</style><link rel="stylesheet" id="wp-block-library-css" href="https://blog.kroy.io/wp-includes/css/dist/block-library/style.min.css" media="all"><style id="wp-block-library-inline-css">
.has-text-align-justify{text-align:justify;}
</style><link rel="stylesheet" id="wp-block-library-theme-css" href="https://blog.kroy.io/wp-includes/css/dist/block-library/theme.min.css" media="all"><link rel="stylesheet" id="wpautoterms_css-css" href="https://blog.kroy.io/wp-content/plugins/auto-terms-of-service-and-privacy-policy/css/wpautoterms.css" media="all"><link rel="stylesheet" id="sinatra-styles-css" href="https://blog.kroy.io/wp-content/themes/sinatra/assets/css/style.min.css" media="all"><link rel="stylesheet" id="sinatra-dynamic-styles-css" href="https://blog.kroy.io/wp-content/uploads/sinatra/dynamic-styles.css" media="all"><link rel="stylesheet" id="addtoany-css" href="https://blog.kroy.io/wp-content/plugins/add-to-any/addtoany.min.css" media="all"><style id="addtoany-inline-css">
@media screen and (max-width:980px){
.a2a_floating_style.a2a_vertical_style{display:none;}
}
</style><link rel="stylesheet" id="jetpack_css-css" href="https://blog.kroy.io/wp-content/plugins/jetpack/css/jetpack.css" media="all"><script>
var exactmetrics_frontend = {"js_events_tracking":"true","download_extensions":"zip,mp3,mpeg,pdf,docx,pptx,xlsx,rar","inbound_paths":"[{\"path\":\"\\\/go\\\/\",\"label\":\"affiliate\"},{\"path\":\"\\\/recommend\\\/\",\"label\":\"affiliate\"}]","home_url":"https:\/\/PLACEHOLDER.wpsho","hash_tracking":"false"};
</script><script src="https://blog.kroy.io/wp-content/plugins/google-analytics-dashboard-for-wp/assets/js/frontend.min.js"></script><script src="https://blog.kroy.io/wp-includes/js/jquery/jquery.js"></script><script src="https://blog.kroy.io/wp-includes/js/jquery/jquery-migrate.min.js"></script><script src="https://blog.kroy.io/wp-content/plugins/add-to-any/addtoany.min.js"></script><script data-cfasync="false">
window.a2a_config=window.a2a_config||{};a2a_config.callbacks=[];a2a_config.overlays=[];a2a_config.templates={};
(function(d,s,a,b){a=d.createElement(s);b=d.getElementsByTagName(s)[0];a.async=1;a.src="https://static.addtoany.com/menu/page.js";b.parentNode.insertBefore(a,b);})(document,"script");
</script><style type="text/css">img#wpstats{display:none}</style><meta name="theme-color" content="#3857F1"><link rel="icon" href="https://blog.kroy.io/wp-content/uploads/2020/04/cropped-android-chrome-512x512-3-32x32.png" sizes="32x32"><link rel="icon" href="https://blog.kroy.io/wp-content/uploads/2020/04/cropped-android-chrome-512x512-3-192x192.png" sizes="192x192"><link rel="apple-touch-icon" href="https://blog.kroy.io/wp-content/uploads/2020/04/cropped-android-chrome-512x512-3-180x180.png"><meta name="msapplication-TileImage" content="https://blog.kroy.io/wp-content/uploads/2020/04/cropped-android-chrome-512x512-3-270x270.png"></head><body class="post-template-default single single-post postid-28 single-format-standard wp-embed-responsive sinatra-topbar__separators-regular sinatra-layout__fw-contained sinatra-with-dropdown-indicators sinatra-header-layout-1 sinatra-menu-animation-underline sinatra-header__separators-none si-single-title-in-content si-page-title-align-left comments-open si-has-sidebar sinatra-sidebar-style-3 sinatra-sidebar-position__right-sidebar si-sidebar-r__after-content entry-media-hover-style-1 sinatra-copyright-layout-1 si-input-supported validate-comment-form si-menu-accessibility">


<div id="page" class="hfeed site">
	<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

	
	<header id="masthead" class="site-header" role="banner" itemtype="https://schema.org/WPHeader" itemscope="itemscope"><div id="sinatra-header">
		<div id="sinatra-header-inner">
	
<div class="si-container si-header-container">

	
<div class="sinatra-logo si-header-element" itemtype="https://schema.org/Organization" itemscope="itemscope">
	<div class="logo-inner"><span class="site-title" itemprop="name">
						<a href="https://blog.kroy.io/" rel="home" itemprop="url">
							blog.kroy.io
						</a>
					</span><p class="site-description" itemprop="description">
						computers, tech, and whatever other random stuff crosses my mind.
					</p></div></div>

<nav class="site-navigation main-navigation sinatra-primary-nav sinatra-nav si-header-element" role="navigation" itemtype="https://schema.org/SiteNavigationElement" itemscope="itemscope" aria-label="Site Navigation"><ul class="sinatra-primary-nav"><li><a href="https://blog.kroy.io/"><span>Home</span></a></li></ul></nav><div class="si-header-widgets si-header-element sinatra-widget-location-right"><div class="si-header-widget__search si-header-widget sinatra-hide-mobile-tablet"><div class="si-widget-wrapper">
<div aria-haspopup="true">
	<a href="#" class="si-search">
		<i class="si-icon si-search"></i>
	</a>

	<div class="si-search-simple si-search-container dropdown-item">
		<form role="search" aria-label="Site Search" method="get" class="si-search-form" action="https://blog.kroy.io/">

			<label class="si-form-label">
				<span class="screen-reader-text">Search for:</span>
				<input type="search" class="si-input-search" placeholder="Search" value="" name="s" autocomplete="off"></label>

			
			<button type="submit" class="sinatra-animate-arrow right-arrow" aria-hidden="true" role="button">
				<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="18px" viewbox="0 0 30 18" enable-background="new 0 0 30 18" xml:space="preserve"><path class="arrow-handle" d="M2.511,9.007l7.185-7.221c0.407-0.409,0.407-1.071,0-1.48s-1.068-0.409-1.476,0L0.306,8.259 c-0.408,0.41-0.408,1.072,0,1.481l7.914,7.952c0.407,0.408,1.068,0.408,1.476,0s0.407-1.07,0-1.479L2.511,9.007z"></path><path class="arrow-bar" fill-rule="evenodd" clip-rule="evenodd" d="M1,8h28.001c0.551,0,1,0.448,1,1c0,0.553-0.449,1-1,1H1c-0.553,0-1-0.447-1-1
					                            C0,8.448,0.447,8,1,8z"></path></svg></button>
		</form>
	</div>
</div>
</div></div></div>
	<span class="si-header-element si-mobile-nav">
				<button class="si-hamburger hamburger--spin si-hamburger-sinatra-primary-nav" aria-label="Menu" aria-controls="sinatra-primary-nav" type="button">

			
			<span class="hamburger-box">
				<span class="hamburger-inner"></span>
			</span>

		</button>
			</span>

</div>	</div>
	</div>
		
<div class="page-header si-has-breadcrumbs">

	
	
	<div class="si-container si-breadcrumbs"><nav role="navigation" aria-label="Breadcrumbs" class="breadcrumb-trail breadcrumbs" itemprop="breadcrumb"><ul class="trail-items" itemscope itemtype="http://schema.org/BreadcrumbList"><meta name="numberOfItems" content="5"><meta name="itemListOrder" content="Ascending"><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item trail-begin"><a href="https://blog.kroy.io/" rel="home" itemprop="item"><span itemprop="name">Home</span></a><meta itemprop="position" content="1"></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item"><a href="https://blog.kroy.io/2018/" itemprop="item"><span itemprop="name">2018</span></a><meta itemprop="position" content="2"></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item"><a href="https://blog.kroy.io/2018/05/" itemprop="item"><span itemprop="name">May</span></a><meta itemprop="position" content="3"></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item"><a href="https://blog.kroy.io/2018/05/17/" itemprop="item"><span itemprop="name">17</span></a><meta itemprop="position" content="4"></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem" class="trail-item trail-end"><span><span itemprop="name">RouterOS and Switching, finally managed</span></span><meta itemprop="position" content="5"></li></ul></nav></div>
</div>
	</header><div id="main" class="site-main">

		
<div class="si-container">

	<div id="primary" class="content-area">

		
		<main id="content" class="site-content" role="main" itemscope itemtype="http://schema.org/Blog"><article id="post-28" class="sinatra-article post-28 post type-post status-publish format-standard has-post-thumbnail hentry category-mikrotik category-networking category-routeros" itemscope="" itemtype="https://schema.org/CreativeWork"><div class="post-category">

	<span class="cat-links"><span class="screen-reader-text">Posted in</span><span><a href="https://blog.kroy.io/category/mikrotik/" rel="category tag">mikrotik</a> <a href="https://blog.kroy.io/category/networking/" rel="category tag">Networking</a> <a href="https://blog.kroy.io/category/routeros/" rel="category tag">RouterOS</a></span></span>
</div>

<header class="entry-header"><h1 class="entry-title" itemprop="headline">
		RouterOS and Switching, finally managed	</h1>

</header><div class="entry-meta"><div class="entry-meta-elements">		<span class="post-author">
			<span class="posted-by vcard author" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person">
				<span class="screen-reader-text">Posted by</span>

				
				<span>
										By 					<a class="url fn n" title="View all posts by Kroy" href="https://blog.kroy.io/author/kroy3348/" rel="author" itemprop="url">
						<span class="author-name" itemprop="name">Kroy</span>
					</a>
				</span>
			</span>
		</span>
		<span class="posted-on">May 17, 2018</span><span class="comments-link"><a href="https://blog.kroy.io/2018/05/17/routeros-and-switching/#respond" class="comments-link">No Comments</a></span></div></div><div class="post-thumb entry-media thumbnail"><img width="1024" height="547" src="https://blog.kroy.io/wp-content/uploads/2018/05/screenshot-1024x547.png" class="attachment-large size-large wp-post-image" alt="RouterOS and Switching, finally managed"></div>
<div class="entry-content si-entry" itemprop="text">
	<div class="addtoany_share_save_container addtoany_content addtoany_content_top"><div class="a2a_kit a2a_kit_size_32 addtoany_list" data-a2a-url="https://blog.kroy.io/2018/05/17/routeros-and-switching/" data-a2a-title="RouterOS and Switching, finally managed"><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"></a></div></div>
<p>I think anybody that’s ever used a Mikrotik and RouterOS can probably agree.  That tiny company from Latvia does things a bit… different.</p>



<p>Since October of 2017, I’ve been fighting with RouterOS and switching.  Well, not constantly, but it’s something that I keep finding reasons to try and hash out.  A few days ago, thanks to a one or two sentence post on Reddit, I finally figured it out.</p>



<hr class="wp-block-separator"><p>Back in October 2017, I picked up a CRS317-1G-16S+RM.  This is Mikrotik’s 16 port SFP+ switch with a single gigabit port, ostenibly for management.  Around that time, I also started using a CCR (Cloud Core Router) for my main edge device.</p>



<p>My requirements were fairly simple:</p>



<ul><li>More than 12 SFP+ ports</li><li>10Gb</li><li>Ability to use VLANs</li></ul><p>I wasn’t worried about any layer 3 capabilities on the switch (at the time), so it didn’t bother me at all that while the CRS317 was capable of being a full layer 3 switch, it couldn’t do it at anywhere near line-rate.</p>



<hr class="wp-block-separator"><h2 id="cloudcorerouter">Cloud Core Router</h2>



<p>The CCR went in without a hitch.  As mentioned, Mikrotik likes to do things a little differently. But there’s a certain logic to the config, especially if you’ve ever done any CLI work on something like a Cisco.</p>



<p>A recent photo of the CCR (cabling disaster included):</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/eaYEoM0-1024x768.jpg" alt="" class="wp-image-101" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/eaYEoM0-1024x768.jpg 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/eaYEoM0-300x225.jpg 300w,https://blog.kroy.io/wp-content/uploads/2019/08/eaYEoM0-768x576.jpg 768w,https://blog.kroy.io/wp-content/uploads/2019/08/eaYEoM0.jpg 1492w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>For routing, I’ll say I absolutely adore Mikrotik and RouterOS. I have even started replacing some of my VPSs with CHRs, just because it works so well.</p>



<h2 id="cloudrouterswitch">Cloud Router Switch</h2>



<p>Switching on the other hand is a disaster, and for almost a month when I first had the CRS317, I was unable to even use the switch.</p>



<p>With a CRS (Cloud Router Switch), there are two options.  RouterOS, which gives you full layer 3 capabilites, but potentially sacrifices line-rate speeds if you try and use any routing features, or SwOS, which turns the switch into an almost too-dumb managed switch that only supports LAGs, VLANs, RSTP, and not much else.</p>



<p>The problem was three-fold:</p>



<ul><li>The default SwOS firmware (2.3p) on the switch resulted in a SwOS bootloop.</li><li>The available firmware (2.5) at the time broke DHCP on any VLANs the switch could see.</li><li>Trying to figure RouterOS switching (especially in the pre-6.41 RouterOS versions) was probably one of the first IT related things in a long time that I would honestly say “defeated” me.</li></ul><p>Until Mikrotik released SwOS version 2.6, around mid-November, the switch was as good as a brick, at least to me.</p>



<hr class="wp-block-separator"><p>Fast forward some months and once again I was looking to get RouterOS running on my CRS317.  The reasons were simple.  My RouterOS knowledge had grown exponentially through my machinations on the CCR, and it constantly bugged me that RouterOS on the CRS had defeated me.  Not to mentioned my interest in networking concepts has evolved and I wanted to use some non-router-y layer 3 features, like DHCP Relay.</p>



<p>It helped that the current RouterOS versions have attempted to clean up the switching config.  I say “attempted” because it’s still a bit of a mess, but the bridging system is at least a <em>SMALL</em> measure of improvement over the old master-port config.  Unfortunately, like any transition, it doesn’t help that the documentation is a bit hard to follow as it’s a mix of the old and new ways to handle things.</p>



<p>Unfortunately, as the CRS317 is my core switch, I was only able to schedule an hour or two of downtime every other week.  This was not enough time for me to be able to figure it out, not to mention formulate the correct questions to be asking after a failed attempt.  I had posted some inqueries on a few subreddits and at the Mikrotik forums without much luck.</p>



<p>I’ve got quite a bit of experience with Cisco and Dell networking, and have no problem setting up a Cisco L2/L3 switch in a few minutes via a serial cable, but this stupid Mikrotik switch was killing me.  And a some queries to a few regulars that have mentioned they also have these switches told me I wasn’t the only one finding it difficult.</p>



<p>The standard response was clear. Just stick with SwOS.</p>



<hr class="wp-block-separator"><h2 id="puttingitalltogether">Putting it all together</h2>



<p>As the weeks passed, I became more and more frantic.  Once again this stupid switch was defeating me. I knew I was close, but every time I thought I had it, my whole network went down.  It turns out that at least part of my problems was because of some dumb RSTP bug on my Netgear switch.</p>



<p>Ultimately, I think that last item, the RSTP bug, was the cause of most of my headaches.  I probably had a working config on more than one occasion, but because the bug knocked down my entire network, I really had no way of knowing.</p>



<p>I also believe this problem was exacerbated by the fact that I think it’s easy to create forwarding loops with the VLAN filtering that’s present on the Mikrotik switches.</p>



<p>I have absolutely no idea why I did it with all the problems I was having, but when the opportunity to buy a CRS326-24G-2S+RM for less than $150 arose, I jumped on it.</p>



<p>With a separate switch, and a handful of hours, I was finally able to get it working.</p>



<hr class="wp-block-separator"><h1 id="routerosswitchingandvlans">RouterOS, Switching and VLANs!</h1>



<p>First off, per the following chart, unless you have a CRS3xx, it’s probably not worth running RouterOS, at least at this time.  The CRS1xx/2xx disable hardware offload (and therefore line-rate) with just using some otherwise basic features.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/Vujbk3P-1-1024x413.png" alt="hardware offload chart" class="wp-image-103" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/Vujbk3P-1-1024x413.png 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/Vujbk3P-1-300x121.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/Vujbk3P-1-768x310.png 768w,https://blog.kroy.io/wp-content/uploads/2019/08/Vujbk3P-1.png 1141w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>I’m also going to assume a basic working knowledge of how to navigate RouterOS. Anybody that’s ever done a CLI on a Cisco can probably hammer it out because it’s easy to just <code><tab></code> your way through things.  And once the switch is all set up and configured, you can access it via the web ports/WinBox if that’s your thing.</p>



<h3 id="nittygritty">Nitty Gritty</h3>



<p>I would highly recommend doing most of this via a serial cable.  It is VERY easy to lock yourself out of these things because of the confusing way they handle VLANs.</p>



<p>With the serial cable, you can reboot and navigate the menus to choose RouterOS as the default boot OS (push a key in the first few seconds).</p>



<p>The first step is to ensure you are running the most recent RouterOS version, 6.42.1 at the time of this writing. To check the version:</p>



<ul><li><code>/system resource print</code></li></ul><p>If not the current version, you can download the most recent version from MikroTik and drop it in the <code>/files</code>.  A simple reboot will execute the upgrade.  If you get the switch online, you can also upgrade from the GUI or WinBox.</p>



<p>Once you have the current RouterOS version installed, it’s a good idea to upgrade RouterBOARD too (the boot firmware).  I would also recommend enabling the <code>ipv6</code> package, which for some silly reason, isn’t by default.</p>



<ul><li><code>/system package enable ipv6</code>, <code>/system routerboard upgrade</code> and <code>/system reboot</code></li></ul><p>At this point, you should be on the latest version of everything.</p>



<p>I would recommend a system configuration reset, simply because especially if you are coming from a pre-6.41 version, the migration from master-port to bridge is a bit ugly, at least in how it names things.</p>



<ul><li><code>/system reset-configuration</code> and ignore the “dangerous” warning.</li></ul><h3 id="defaultconfig">Default Config</h3>



<p>After the switch reboots, and you login (user: admin, no password), it will ask you to either accept or undo the default configuration.  I would accept it.</p>



<p>The default configuration isn’t bad as it handles some of the tedium for you, setting up a bridge and dropping all the ports on it.  It also gives the switch a default IP of <code>192.168.88.1/24</code> on the bridge (every port), so you could potentially give yourself an IP on that subnet and continue to configure the switch over the network.</p>



<p>You can view the default config with <code>/export</code></p>



<hr class="wp-block-separator"><h3 id="startcustomizing">Start Customizing</h3>



<p>The default IP is usually the first thing I remove.  My network is on <code>10.0.0.0/8</code>, and as mentioned above, it’s way too easy to lock yourself out of the switch with a simple misconfiguration.  So removing it is as simple as:</p>



<ul><li><code>/ip address print</code> – Shows a list of IPs and interfaces they are assigned</li><li><code>/ip address remove 0</code> – Remove the number.  In the following example, <code>10.254.1.248/24</code> would be removed.  You can use the above <code>print</code> command afterwards to verify its removal.</li></ul><figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/aFQdad8.png" alt="remove ip" class="wp-image-104" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/aFQdad8.png 484w,https://blog.kroy.io/wp-content/uploads/2019/08/aFQdad8-300x79.png 300w" sizes="(max-width: 484px) 100vw, 484px"></figure><p>Next, I set up any LAGs I need.  To do this, you need to remove the ports from the bridge so they can be used in a LAG:</p>



<ul><li><code>/interface bridge port print</code> – Show all the ports on the main bridge.</li><li><code>/interface bridge port remove 0,1</code> – Assuming I wanted to put ether1 and ether2 in a LAG in the following example:</li></ul><figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/kr35Z82-1024x142.png" alt="bridge" class="wp-image-105" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/kr35Z82-1024x142.png 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/kr35Z82-300x42.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/kr35Z82-768x106.png 768w,https://blog.kroy.io/wp-content/uploads/2019/08/kr35Z82.png 1386w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>And then dropping them in a LAG:</p>



<ul><li><code>/interface bonding add mode=802.3ad name=BOND-ToOtherSwitch slaves=ether1,ether2 transmit-hash-policy=layer-3-and-4</code></li></ul><p>Finally, add the new LAG interface back to the bridge:</p>



<ul><li><code>/interface bridge port add bridge=bridge interface=BOND-ToOtherSwitch</code></li></ul><p>Hopefully, when you do a <code>/interface bridge port print</code> to view the config, you see something like this:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/6J9PHyv-1024x44.png" alt="hardware accel" class="wp-image-106" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/6J9PHyv-1024x44.png 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/6J9PHyv-300x13.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/6J9PHyv-768x33.png 768w,https://blog.kroy.io/wp-content/uploads/2019/08/6J9PHyv.png 1176w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>The “H” next to the interface name means it’s hardware accelerated and will go line-rate, also designated by HW=Yes in the same output of <code>print</code>.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/knDUG2Q.png" alt="hwyes" class="wp-image-107"></figure><p>Something else to do now is to ensure that RSTP is enabled on the bridge.  There might be a bug in RouterOS where the bridge refuses to pass traffic if it’s not.  I’m not sure if that’s the case but it’s something that someone mentioned in a post and I’m going to take them at their word because of all the problems I’ve had.</p>



<ul><li><code>/interface bridge print</code></li><li><code>/interface bridge set 0 protocol-mode=rstp</code> – The <code>0</code> matches the ID from the <code>print</code></li></ul><figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/BzLY132.png" alt="rstp" class="wp-image-108" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/BzLY132.png 901w,https://blog.kroy.io/wp-content/uploads/2019/08/BzLY132-300x40.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/BzLY132-768x102.png 768w" sizes="(max-width: 901px) 100vw, 901px"></figure><h3 id="switchmanagement">Switch Management</h3>



<p>The next step is to get the switch available on the network, or even able to contact the Internet (for easy updating).</p>



<p>I have separate VLANs for things, but you could easily just put the IP on the bridge too.  I’m going to focus on the former since VLANs are really where these switches are a pain.</p>



<p>Anybody that’s set up a Cisco is well familiar with these steps:</p>



<ul><li><code>/interface vlan add comment=Management interface=bridge name=ManagementNet vlan-id=50</code> – Add a management interface on VLAN50</li><li><code>/interface vlan add comment="SwitchNet" interface=bridge name=SwitchNet vlan-id=254</code> – Add an interface that can route.  Even if you aren’t doing any routing specifically on the switch, this is how the switch would access the Internet (mostly for updating).</li><li><code>/ip dns set servers=10.3.1.253,10.3.1.254</code> – Add some DNS servers</li><li><code>/ip route add distance=1 gateway=10.254.1.1</code> – Add the default route for the switch.</li></ul><p>As you can probably tell, <code>SwitchNet</code> is interface this switch uses to get out to the Internet.  As before, an <code>/interface vlan print</code> will show verify that the interfaces were created:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/eVPYeTv.png" alt="vlans" class="wp-image-109" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/eVPYeTv.png 961w,https://blog.kroy.io/wp-content/uploads/2019/08/eVPYeTv-300x52.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/eVPYeTv-768x132.png 768w" sizes="(max-width: 961px) 100vw, 961px"></figure><h1 id="success">Success!</h1>



<p>So yay!  The switch should be working and passing VLANs.  It should also be accessible via any SVIs you set.</p>



<p>So you’d think that would enough right?  Well only if you don’t care about any VLAN filtering.</p>



<p>I have a fairly simple setup from that perspective and I’m not doing much in the way of VLAN enforcement. Unfortunately, that also includes having a port act as a traditional “access” port.</p>



<p>So all the aggravation I’ve felt over many months is to handle something that would be handled on a Cisco in two lines:</p>



<ul><li><code>switchport mode access</code></li><li><code>switchport access vlan 5</code></li></ul><h2 id="vlanfiltering">VLAN Filtering</h2>



<p>This is really where RouterOS switching gets ugly.  Or at least annoying, especially trying to figure out where things belong with the <code>bridge</code>, bonds, ports and VLAN interfaces.</p>



<p>In this case, I think it’s more useful to take a look at the output of <code>/interface bridge vlan export</code>, which is the raw commands, instead of the output of <code>/interface bridge vlan print</code>, which can include some dynamic stuff, <strong>INCLUDING THE VLANS THAT AREN’T WORKING!!!</strong>.</p>



<p>That last sentence is what makes it somewhat confusing.  It can help you troubleshoot to a point if something isn’t working, but largely you’ll just stare at it and go “Well the interface is there, why isn’t it working?!”</p>



<p>The first step here is to set the <code>pvid</code> on the ports on the bridge <code>/interface bridge port print</code>:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/0wwuhLP-1024x485.png" alt="interfaces" class="wp-image-111" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/0wwuhLP-1024x485.png 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/0wwuhLP-300x142.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/0wwuhLP-768x364.png 768w,https://blog.kroy.io/wp-content/uploads/2019/08/0wwuhLP-1600x758.png 1600w,https://blog.kroy.io/wp-content/uploads/2019/08/0wwuhLP.png 1861w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>And setting the pvid with <code>/interface bridge port set 8,9,10,11 pvid=21</code> and validating with <code>/interface bridge port print from=[/interface bridge port find pvid=21]</code>:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/3PBky5l-1024x113.png" alt="vlan21" class="wp-image-112" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/3PBky5l-1024x113.png 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/3PBky5l-300x33.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/3PBky5l-768x85.png 768w,https://blog.kroy.io/wp-content/uploads/2019/08/3PBky5l-1600x176.png 1600w,https://blog.kroy.io/wp-content/uploads/2019/08/3PBky5l.png 1861w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><hr class="wp-block-separator"><h2 id="vlanfiltering2">VLAN Filtering #2</h2>



<p>Unfortunately, despite setting the <code>pvid</code>, nothing actually happens in this setup without more extensive VLAN filtering.  The switch is just still rather dumbly passing VLANs.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/Fk28kbo-1024x90.png" alt="vlan filtering" class="wp-image-113" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/Fk28kbo-1024x90.png 1024w,https://blog.kroy.io/wp-content/uploads/2019/08/Fk28kbo-300x26.png 300w,https://blog.kroy.io/wp-content/uploads/2019/08/Fk28kbo-768x68.png 768w,https://blog.kroy.io/wp-content/uploads/2019/08/Fk28kbo.png 1191w" sizes="(max-width: 1024px) 100vw, 1024px"></figure><p>Let’s talk a bit about what’s going on here:</p>



<ul><li>Tag VLAN21 on the two LAGs,</li><li>a few other ports on the switch (they are trunks for virtualization hosts,</li><li>and the bridge.  That last piece of information about the bridge is important for later.</li></ul><p><code>/interface bridge vlan add bridge=bridge tagged=BOND-CRS317,BOND-UNIFIPOE,bridge,ether17,ether18,ether19,ether20,ether21,ether22 untagged=ether9,ether10,ether11,ether12 vlan-ids=21</code></p>



<ul><li>The default VLAN1 is untagged on the LAGs,</li><li>the same trunk ports untagged from the first filter-set,</li><li>and a few ports which will be ACCESS ports on the default VLAN.  This is necessary as I haven’t completely my migration off the default VLAN yet for a few things.</li></ul><p><code>/interface bridge vlan add bridge=bridge untagged=BOND-CRS317,BOND-UNIFIPOE,ether17,ether18,ether19,ether20,ether21,ether22,ether1,ether2,ether3,ether4,ether5,ether6,ether7,ether8 vlan-ids=1</code></p>



<ul><li>Tag my other vlans on all the ports.  These aren’t untagged anywhere on this switch.</li></ul><p><code>/interface bridge vlan add bridge=bridge tagged=BOND-CRS317,BOND-UNIFIPOE,ether17,ether18,ether19,ether20,ether21,ether22 vlan-ids=2,3,4,6,7,8,9,20,22,42,77,100,146,253</code></p>



<ul><li>Finally, tag two more VLANs to the LAGs to the bridge (important again here).  This is for my Management and default route VLANs.  I <em>COULD</em> combine this with the above, so above it would just be <code>vlan_ids=2,3,4,5,6,7,8,9,20,22,42,77,100,146,253,254</code>. It’s broken out here as that’s how I built it out as I was testing and it worked.</li></ul><p><code>/interface bridge vlan add bridge=bridge tagged=BOND-CRS317,BOND-UNIFIPOE,bridge vlan-ids=50,254</code></p>



<hr class="wp-block-separator"><h3 id="thecoupdegrce">The Coup de Grâce</h3>



<p>And these are where I kept coming up short:</p>



<p><code>tagged=BOND-CRS317,BOND-UNIFIPOE,bridge</code></p>



<p>The bridge itself must be tagged whenever the associated VLAN is an SVI/accessible IP for the switch itself.</p>



<p>So without VLAN21/50/254 having the bridge tagged on themselves, the switch will block any attempts to contact it over associated IPs.</p>



<p>This was causing me a tremendous headache as I was trying to tag/untag the VLAN interfaces themselves, instead of the bridge, because that’s how literally every other port/interface on the switch works.  Not to mention that I believe you can accidentally create an internal forwarding loop depending on how you place the <code>bridge</code> on the filters.</p>



<p>Finally, turning on VLAN filtering activates this all, and hopefully doesn’t lock you out of the switch:</p>



<ul><li><code>/interface bridge set 0 vlan-filtering=yes</code> – again, the <code>0</code> here would be the number of the bridge from a <code>/interface bridge print</code></li></ul><hr class="wp-block-separator"><h2 id="thepostmortum">The Postmortum</h2>



<p>Assuming everything went well, the switch should be passing traffic, the access ports should be acting like access ports, and the switch should be responding and accessible on its SVIs.</p>



<p>I’m using it as a dhcp relay:</p>



<p><code>/ip dhcp-relay add dhcp-server=10.254.1.1 disabled=no interface=ProdUnmanaged local-address=10.21.21.249 name=prod-unmanaged-relay</code></p>



<p>Enabled neighbor discovery:</p>



<p><code>/ip neighbor discovery-settings set discover-interface-list=all</code></p>



<p>Disabled all the unnecessary services:</p>



<pre class="wp-block-code"><code>/ip service
set telnet disabled=yes
set ftp disabled=yes
set ssh port=22222
set api disabled=yes
set winbox disabled=yes
set api-ssl disabled=yes</code></pre>



<p>Set up SSH key based authentication (honestly this alone might have been enough reason for me to do this) :</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/XR9NhBF.png" alt="ssh" class="wp-image-114" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/XR9NhBF.png 475w,https://blog.kroy.io/wp-content/uploads/2019/08/XR9NhBF-300x147.png 300w" sizes="(max-width: 475px) 100vw, 475px"></figure><p>And pointed a few gateways at the switch for routing where I don’t need or care about wire-speed routing.</p>



<hr class="wp-block-separator"><p>So I’ve finally got it all working.  I’ve only been working on it since October.  The feeling when I enabled VLAN filtering again (for the umpteenth time) and everything still worked??</p>



<figure class="wp-block-image"><img src="https://i.imgur.com/1PfV0bU.jpg" alt="dafeels"></figure><p>Maybe someday they will release a switch that can do line-rate routing.  Hopefully by then they also will have cleaned up how the VLANs are handled a bit more as this is still a bit confusing.</p>



<p>In conclusion, I actually really like this hardware. I know some people would never buy white hardware, but I really appreciate the asthetic</p>



<p>I’m even considering buying a few more Mikrotik switches (and am fully regretting a few recent EdgeSwitch purchases). Not to mention I have a US-8 and US-8-150W I’d love to replace.</p>
<div class="addtoany_share_save_container addtoany_content addtoany_content_bottom"><div class="a2a_kit a2a_kit_size_32 addtoany_list" data-a2a-url="https://blog.kroy.io/2018/05/17/routeros-and-switching/" data-a2a-title="RouterOS and Switching, finally managed"><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"></a></div></div></div>




<div class="entry-footer">

	<span class="last-updated">Last updated on July 10, 2020</span>
</div>


<section class="author-box" itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><div class="author-box-avatar">
		<img alt="" src="https://secure.gravatar.com/avatar/347d9cf482cfe91444ae0d59550ad83c?s=75&d=mm&r=g" srcset="https://secure.gravatar.com/avatar/347d9cf482cfe91444ae0d59550ad83c?s=150&d=mm&r=g 2x" class="avatar avatar-75 photo" height="75" width="75"></div>

	<div class="author-box-meta">
		<h4 class="author-box-title">
							<a href="https://blog.kroy.io/author/kroy3348/" class="url fn n" rel="author" itemprop="url">
				Kroy	
				</a>
						</h4>

		
		
		<div class="author-box-content" itemprop="description">
			sometimes hacker of things and other things...		</div>

		
<div class="more-posts-button">
	<a href="https://blog.kroy.io/author/kroy3348/" class="si-btn btn-text-1" role="button"><span>View All Posts</span></a>
</div>
	</div>

</section><section class="post-nav" role="navigation"><h2 class="screen-reader-text">Post navigation</h2>

	<div class="nav-previous"><h6 class="nav-title">Previous Post</h6><a href="https://blog.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/" rel="prev"><div class="nav-content"><img width="75" height="75" src="https://blog.kroy.io/wp-content/uploads/2018/05/zleVN8t-150x150.jpg" class="attachment-75x75 size-75x75 wp-post-image" alt="tower" itemprop="image"><span>Building a Disk Tower, for all pain and no profit</span></div></a></div><div class="nav-next"><h6 class="nav-title">Next Post</h6><a href="https://blog.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/" rel="next"><div class="nav-content"><span>The ZFS walk-of-shame with Seagate and OmniOS CE.</span> <img width="75" height="75" src="https://blog.kroy.io/wp-content/uploads/2018/07/photo-1531570325967-4b8fcb7e120d-150x150.jpg" class="attachment-75x75 size-75x75 wp-post-image" alt="i-am-a-monkey" itemprop="image"></div></a></div>
</section></article><section id="comments" class="comments-area"><div class="comments-title-wrapper center-text">
		<h3 class="comments-title">
			Comments		</h3>

					<p class="no-comments">No comments yet. Why don’t you start the discussion?</p>
			</div>

	<ol class="comment-list"></ol><div id="respond" class="comment-respond">
		<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2018/05/17/routeros-and-switching/#respond" style="display:none;">Cancel reply</a></small></h3><form action="https://blog.kroy.io/wp-comments-post.php" method="post" id="commentform" class="comment-form"><p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-textarea"><textarea name="comment" id="comment" cols="44" rows="8" class="textarea-comment" placeholder="Write a comment…" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required="required"></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" required="required"></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200"></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes"><label for="wp-comment-cookies-consent">Save my name, email, and website in this browser for the next time I comment.</label></p>
<p class="form-submit"><span class="sinatra-submit-form-button"><input name="submit" type="submit" id="comment-submit" class="si-btn primary-button" value="Post Comment"></span> <input type="hidden" name="comment_post_ID" value="28" id="comment_post_ID"><input type="hidden" name="comment_parent" id="comment_parent" value="0"></p></form>	</div>
	
</section></main></div>

	
<aside id="secondary" class="widget-area si-sidebar-container" itemtype="http://schema.org/WPSideBar" itemscope="itemscope" role="complementary"><div class="si-sidebar-inner">
		
				<div id="recent-posts-2" class="si-sidebar-widget si-widget si-entry widget widget_recent_entries">		<h4 class="widget-title">Recent Posts</h4>		<ul><li>
					<a href="https://blog.kroy.io/2020/05/04/vyos-from-scratch-edition-1/">VyOS from Scratch – Edition 1</a>
									</li>
											<li>
					<a href="https://blog.kroy.io/2020/01/17/the-baby-wyse-the-dell-3040/">A Baby WYSE, the 3040</a>
									</li>
											<li>
					<a href="https://blog.kroy.io/2019/12/08/the-wyse-5070-a-perfect-little-vyos-device/">The WYSE 5070, a perfect little VyOS device</a>
									</li>
											<li>
					<a href="https://blog.kroy.io/2019/11/21/battle-of-the-bare-metal-routers/">Battle of the Bare Metal Routers</a>
									</li>
											<li>
					<a href="https://blog.kroy.io/2019/10/28/migrating-a-efi-linux-install-to-a-new-server/">Migrating an EFI Linux Install to a new Server</a>
									</li>
					</ul></div><div id="archives-2" class="si-sidebar-widget si-widget si-entry widget widget_archive"><h4 class="widget-title">Archives</h4>		<ul><li><a href="https://blog.kroy.io/2020/05/">May 2020</a></li>
	<li><a href="https://blog.kroy.io/2020/01/">January 2020</a></li>
	<li><a href="https://blog.kroy.io/2019/12/">December 2019</a></li>
	<li><a href="https://blog.kroy.io/2019/11/">November 2019</a></li>
	<li><a href="https://blog.kroy.io/2019/10/">October 2019</a></li>
	<li><a href="https://blog.kroy.io/2019/09/">September 2019</a></li>
	<li><a href="https://blog.kroy.io/2019/08/">August 2019</a></li>
	<li><a href="https://blog.kroy.io/2019/01/">January 2019</a></li>
	<li><a href="https://blog.kroy.io/2018/11/">November 2018</a></li>
	<li><a href="https://blog.kroy.io/2018/07/">July 2018</a></li>
	<li><a href="https://blog.kroy.io/2018/05/">May 2018</a></li>
	<li><a href="https://blog.kroy.io/2017/12/">December 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/08/">August 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/07/">July 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/06/">June 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/05/">May 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/04/">April 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/03/">March 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/02/">February 2017</a></li>
	<li><a href="https://blog.kroy.io/2017/01/">January 2017</a></li>
		</ul></div><div id="categories-2" class="si-sidebar-widget si-widget si-entry widget widget_categories"><h4 class="widget-title">Categories</h4>		<ul><li class="cat-item cat-item-12"><a href="https://blog.kroy.io/category/ceph/">ceph</a>
</li>
	<li class="cat-item cat-item-19"><a href="https://blog.kroy.io/category/debian/">Debian</a>
</li>
	<li class="cat-item cat-item-22"><a href="https://blog.kroy.io/category/docker/">Docker</a>
</li>
	<li class="cat-item cat-item-24"><a href="https://blog.kroy.io/category/virtualization/esxi/">ESXi</a>
</li>
	<li class="cat-item cat-item-7"><a href="https://blog.kroy.io/category/freenas/">freenas</a>
</li>
	<li class="cat-item cat-item-26"><a href="https://blog.kroy.io/category/hardware/">Hardware</a>
</li>
	<li class="cat-item cat-item-29"><a href="https://blog.kroy.io/category/hardware-hacks/">Hardware Hacks</a>
</li>
	<li class="cat-item cat-item-4"><a href="https://blog.kroy.io/category/homelab/">HomeLab</a>
</li>
	<li class="cat-item cat-item-2"><a href="https://blog.kroy.io/category/mediaserver/">mediaserver</a>
</li>
	<li class="cat-item cat-item-15"><a href="https://blog.kroy.io/category/mikrotik/">mikrotik</a>
</li>
	<li class="cat-item cat-item-20"><a href="https://blog.kroy.io/category/networking/">Networking</a>
</li>
	<li class="cat-item cat-item-8"><a href="https://blog.kroy.io/category/nucnucnuc/">nucnucnuc</a>
</li>
	<li class="cat-item cat-item-9"><a href="https://blog.kroy.io/category/pfsense/">pfsense</a>
</li>
	<li class="cat-item cat-item-11"><a href="https://blog.kroy.io/category/proxmox/">proxmox</a>
</li>
	<li class="cat-item cat-item-25"><a href="https://blog.kroy.io/category/virtualization/proxmox-virtualization/">Proxmox</a>
</li>
	<li class="cat-item cat-item-13"><a href="https://blog.kroy.io/category/qnap/">QNAP</a>
</li>
	<li class="cat-item cat-item-31"><a href="https://blog.kroy.io/category/homelab/rack-migration/">Rack Migration</a>
</li>
	<li class="cat-item cat-item-14"><a href="https://blog.kroy.io/category/routeros/">RouterOS</a>
</li>
	<li class="cat-item cat-item-18"><a href="https://blog.kroy.io/category/routing/" title="Stuff about routing">Routing</a>
</li>
	<li class="cat-item cat-item-21"><a href="https://blog.kroy.io/category/rtlsdr/">RTLSDR</a>
</li>
	<li class="cat-item cat-item-30"><a href="https://blog.kroy.io/category/storage/">Storage</a>
</li>
	<li class="cat-item cat-item-3"><a href="https://blog.kroy.io/category/sysadmin/">SysAdmin</a>
</li>
	<li class="cat-item cat-item-23"><a href="https://blog.kroy.io/category/virtualization/">Virtualization</a>
</li>
	<li class="cat-item cat-item-16"><a href="https://blog.kroy.io/category/vyos/">VyOS</a>
</li>
	<li class="cat-item cat-item-5"><a href="https://blog.kroy.io/category/zfs/">ZFS</a>
</li>
		</ul></div><div id="meta-2" class="si-sidebar-widget si-widget si-entry widget widget_meta"><h4 class="widget-title">Meta</h4>			<ul><li><a href="https://blog.kroy.io/wp-login.php">Log in</a></li>
			<li><a href="https://blog.kroy.io/feed/">Entries feed</a></li>
			<li><a href="https://blog.kroy.io/comments/feed/">Comments feed</a></li>
			<li><a href="https://wordpress.org/">WordPress.org</a></li>			</ul></div><div id="custom_html-2" class="widget_text si-sidebar-widget si-widget si-entry widget widget_custom_html"><div class="textwidget custom-html-widget"><div id="amzn-assoc-ad-96eac8be-1743-4b44-98e2-f274484e1cac"></div><script async src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=96eac8be-1743-4b44-98e2-f274484e1cac"></script></div></div>
			</div>

</aside></div>

		
	</div>
	
	
			<footer id="colophon" class="site-footer" role="contentinfo" itemtype="http://schema.org/WPFooter" itemscope="itemscope"><div id="sinatra-copyright" class="contained-separator">
	<div class="si-container">
		<div class="si-flex-row">

			<div class="col-xs-12 center-xs col-md flex-basis-auto start-md"><div class="si-copyright-widget__text si-copyright-widget sinatra-all"><span>Copyright 2020 — blog.kroy.io. All rights reserved. <a href="https://sinatrawp.com/" class="imprint" target="_blank" rel="noopener noreferrer">Sinatra WordPress Theme</a></span></div></div>
			<div class="col-xs-12 center-xs col-md flex-basis-auto end-md"></div>

		</div>
	</div>
</div>

		</footer></div>

<a href="#" id="si-scroll-top" class="si-smooth-scroll" title="Scroll to Top">
	<span class="si-scroll-icon" aria-hidden="true">
		<i class="si-icon si-chevron-up top-icon"></i>
		<i class="si-icon si-chevron-up"></i>
	</span>
	<span class="screen-reader-text">Scroll to Top</span>
</a>
<div class="a2a_kit a2a_kit_size_32 a2a_floating_style a2a_vertical_style" style="right:0px;top:100px;background-color:transparent;"><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F17%2Frouteros-and-switching%2F&linkname=RouterOS%20and%20Switching%2C%20finally%20managed" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share"></a></div><script src="https://blog.kroy.io/wp-content/plugins/wplegalpages/admin/js/jquery.cookie.min.js"></script><script>
var sinatra_vars = {"ajaxurl":"https:\/\/blog.kroy.io\/wp-admin\/admin-ajax.php","nonce":"273c5609c8","responsive-breakpoint":"960","strings":{"comments_toggle_show":"Leave a Comment","comments_toggle_hide":"Hide Comments"}};
</script><script src="https://blog.kroy.io/wp-content/themes/sinatra/assets/js/sinatra.min.js"></script><script>
	!function(){var e=-1<navigator.userAgent.toLowerCase().indexOf("webkit"),t=-1<navigator.userAgent.toLowerCase().indexOf("opera"),n=-1<navigator.userAgent.toLowerCase().indexOf("msie");(e||t||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1)}();
	</script><script type="text/javascript" src="https://stats.wp.com/e-202028.js" async="async" defer></script><script type="text/javascript">
	_stq = window._stq || [];
	_stq.push([ 'view', {v:'ext',j:'1:8.7',blog:'166765678',post:'28',tz:'-5',srv:'blog.kroy.io'} ]);
	_stq.push([ 'clickTrackerInit', '166765678', '28' ]);
</script><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><symbol id="icon-chat" viewbox="0 0 576 512"><path d="M512 160h-96V64c0-35.3-28.7-64-64-64H64C28.7 0 0 28.7 0 64v160c0 35.3 28.7 64 64 64h32v52c0 7.1 5.8 12 12 12 2.4 0 4.9-.7 7.1-2.4L224 288h128c35.3 0 64-28.7 64-64v-32h96c17.6 0 32 14.4 32 32v160c0 17.6-14.4 32-32 32h-64v49.6l-80.2-45.4-7.3-4.2H256c-17.6 0-32-14.4-32-32v-96l-32 18.1V384c0 35.3 28.7 64 64 64h96l108.9 61.6c2.2 1.6 4.7 2.4 7.1 2.4 6.2 0 12-4.9 12-12v-52h32c35.3 0 64-28.7 64-64V224c0-35.3-28.7-64-64-64zm-128 64c0 17.6-14.4 32-32 32H215.6l-7.3 4.2-80.3 45.4V256H64c-17.6 0-32-14.4-32-32V64c0-17.6 14.4-32 32-32h288c17.6 0 32 14.4 32 32v160z"></path></symbol><symbol id="icon-quote" viewbox="0 0 123.961 123.961"><path d="M49.8 29.032c3.1-1.3 4.4-5 3-8l-4.9-10.3c-1.4-2.899-4.8-4.2-7.8-2.899-8.5 3.6-15.8 8.3-21.6 14C11.4 28.532 6.6 36.232 4 44.732c-2.6 8.601-4 20.3-4 35.2v30.7c0 3.3 2.7 6 6 6h39.3c3.3 0 6-2.7 6-6v-39.3c0-3.301-2.7-6-6-6H26.5c.2-10.101 2.6-18.2 7-24.301 3.6-4.898 9-8.898 16.3-11.999zM120.4 29.032c3.1-1.3 4.399-5 3-8l-4.9-10.199c-1.4-2.9-4.8-4.2-7.8-2.9-8.4 3.6-15.601 8.3-21.5 13.9-7.101 6.8-12 14.5-14.601 23-2.6 8.399-3.899 20.1-3.899 35.1v30.7c0 3.3 2.7 6 6 6H116c3.3 0 6-2.7 6-6v-39.3c0-3.301-2.7-6-6-6H97.1c.2-10.101 2.601-18.2 7-24.301 3.6-4.899 9-8.899 16.3-12z"></path></symbol></svg><div class="wpautoterms-footer"><p>
		<a href="https://blog.kroy.io/wpautoterms/privacy-policy/">Privacy Policy</a><span class="separator"> - </span><a href="https://blog.kroy.io/wpautoterms/terms-and-conditions/">Terms and Conditions</a></p>
</div>
</body></html>
