<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>mediaserver &#8211; blog.kroy.io</title>
	<atom:link href="https://blog.kroy.io/category/mediaserver/feed/" rel="self" type="application/rss+xml" />
	<link>https://blog.kroy.io/</link>
	<description>computers, tech, and whatever other random stuff crosses my mind.</description>
	<lastBuildDate>Fri, 30 Aug 2019 13:38:41 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.5.3</generator>

<image>
	<url>https://blog.kroy.io/wp-content/uploads/2020/04/cropped-android-chrome-512x512-3-32x32.png</url>
	<title>mediaserver &#8211; blog.kroy.io</title>
	<link>https://blog.kroy.io/</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">166765678</site>	<item>
		<title>One Media Server to Rule Them All &#8211; Part 2</title>
		<link>https://blog.kroy.io/2017/01/17/one-media-server-to-rule-them-all-part-2/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=one-media-server-to-rule-them-all-part-2</link>
					<comments>https://blog.kroy.io/2017/01/17/one-media-server-to-rule-them-all-part-2/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Wed, 18 Jan 2017 01:54:00 +0000</pubDate>
				<category><![CDATA[mediaserver]]></category>
		<category><![CDATA[SysAdmin]]></category>
		<category><![CDATA[ZFS]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2017/01/17/one-media-server-to-rule-them-all-part-2/</guid>

					<description><![CDATA[FreeNAS WOAH! It was around the time my head was exploding from carrying around USB hard drives that my brother introduced me to FreeNAS. MIND BLOWN All I could say&#8230;]]></description>
										<content:encoded><![CDATA[
<h5 id="freenaswoah">FreeNAS WOAH!</h5>



<hr class="wp-block-separator"/>



<p>It was around the time my head was exploding from carrying around <a href="/one-media-server-to-rule-them-all-part-1/#exthd">USB hard drives</a> that my brother introduced me to FreeNAS.</p>



<h3 id="mindblown"><mark>MIND BLOWN</mark></h3>



<p>All I could say at the time was <em>WOW!!</em>.  This was around 2010.  I remember this because the version I specifically installed a bunch of times was FreeNAS 0.7.2 (sabanda), and I remember FreeNAS 8 was just coming out in beta.</p>



<figure class="wp-block-image"><img loading="lazy" width="1024" height="559" src="https://blog2.kroy.io/wp-content/uploads/2019/08/freenas7-1024x559.png" alt="" class="wp-image-262" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/freenas7-1024x559.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/freenas7-300x164.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/freenas7-768x419.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/freenas7-1600x874.png 1600w, https://blog.kroy.io/wp-content/uploads/2019/08/freenas7.png 1716w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>FreeNAS was certainly a different beast then.  It was one of the few ways you could run ZFS outside of Solaris, and it was designed to be more of a complete media system instead of a just a storage system that is extensible through plugins/jails/Docker.</p>



<p>Coming from a place where I was constantly losing data due to terrible USB hard drives, ZFS seemed like a jackpot.  So I cobbled together a bunch of old hardware, and created this:</p>



<div class="wp-block-image"><figure class="aligncenter"><img loading="lazy" width="229" height="198" src="https://blog2.kroy.io/wp-content/uploads/2019/08/first_media_server.png" alt="" class="wp-image-263"/></figure></div>



<p>It&#8217;s a terribly pixelated image, but you get the point.  I think it had five 500GB drives in it and used some old hardware I had lying around.</p>



<p>At the time, I had significantly hacked around with the underlying system to install XBMC (<a href="https://kodi.tv/">now Kodi</a>) as well as finding and getting a video card with HDMI working. This was by no means an easy feat with the state of FreeBSD in 2010/2011.  Plex and simple streaming was still a few years off yet, so I was stuck with a &#8220;fat&#8221; centralized XBMC install on the server, and a couple of micro PCs running XBMC as a client in the bedrooms.</p>



<p>For me, this was an life-changing setup.  No longer did I have to deal with files that I couldn&#8217;t play due to encoding.  No longer was I lugging two or three hard drives between main PC, to load with media, and the Xbox to play a movie.  MKV files suddenly became the <em>crème de la crème</em> instead of the bane of my existence.</p>



<h6 id="freenassourapples">FreeNAS Sour Apples</h6>



<p><em>(Don&#8217;t get me wrong, I respect what FreeNAS has done for the community.  If nothing else, they brought ZFS to the masses.  But sheeeesh, can they make up their minds and calm down?)</em></p>



<p>I love ZFS.  It is amazing and perfect in so many ways.  I can&#8217;t count how many times I&#8217;ve completely messed something up (unplug a live drive anybody?) and had it keep my data safe.</p>



<p>For as much as I loved ZFS, I disliked FreeNAS.  When I first fired it up, it was pretty great.  But soon I realized I wanted move beyond simple DNLA file serving.  Not to mention be able to run custom services, install drives and fire up XBMC without such a hassle.</p>



<p>FreeNAS 8 changed the playing field for me as well.  It made much of the customization I was doing all but impossible. Many of the Linux-ish tools I was using to customize my server were gone as of that version.</p>



<p>In that version, FreeNAS completely changed directions from a &#8220;media centric&#8221; file server to &#8220;serious file storage only&#8221;.  In hindsight, they probably had a good point.  But at the time and with how I was using the earlier version of FreeNAS, it was an annoying shift. Strangely enough, with the upcoming FreeNAS 10 release, it feels a <em>LOT</em> like they are doing this again.</p>



<p>The final straw was the FreeNAS forums.  Have you ever been there?  <strong>TOXIC</strong> is an understatement.  Ask a simple question and you get absolutely crucified.  Even in 2011/2012, it wasn&#8217;t much better.</p>



<h6 id="entertheubuntu">Enter the Ubuntu</h6>



<p><a href="https://www.ubuntu.com/">Ubuntu</a> has always been one of my favorite Linux distributions.  Having grown up ordering slackware CDs from <a href="https://en.wikipedia.org/wiki/Walnut_Creek_CDROM">ftp.cdrom.com</a>, once Ubuntu hit, it was instant love.</p>



<p>My FreeNAS 0.7.2 USB stick died (once again) and I was stuck deciding where to go next.  Every time I needed to reinstall FreeNAS with all my hacks, it made me want to break something.</p>



<p>In almost an act of divine providence, Ubuntu happened to be the first Linux distribution that could run ZFS. And not more than a week before my USB stick died again, they had released the first version of ZFSOnLinux that could mount and import FreeNAS ZFS Pools.  <strong>NO BRAINER</strong></p>



<p>Ubuntu was perfect.  All the great ZFS stuff as well as a huge array of easy to install drivers and programs.  Were there some growing pains with ZFSOnLinux?  Absolutely, but nothing that really endangered the actual data in the zpool.  This is the webpage I visited at least a few times monthly for those years.</p>



<figure class="wp-block-image"><img loading="lazy" width="1024" height="479" src="https://blog2.kroy.io/wp-content/uploads/2019/08/ppa-1024x479.png" alt="" class="wp-image-264" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/ppa-1024x479.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/ppa-300x140.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/ppa-768x359.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/ppa-1600x748.png 1600w, https://blog.kroy.io/wp-content/uploads/2019/08/ppa.png 1706w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h6 id="stability">Stability</h6>



<p>From 2012-2016 I ran on the same pool in RAIDz2 on Ubuntu.  I grew the pool from a single terabyte to over 30TB.  I swapped out drives to grow the pool or because they failed. I upgraded CPUs and motherboards at least three times, expanded RAM, swapped SATA cards and more.  Most importantly, I never once lost data.  XBMC became Plex, and the server started running extra services like nginx/PHP, Grafana and even a few virtual machines via VirtualBox.</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="648" src="https://blog2.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2.jpg" alt="" class="wp-image-261" srcset="https://blog.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2.jpg 864w, https://blog.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2-768x576.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<p>And this was &#8220;Old Faithful&#8221; and the setup I ran until earlier this year in 2016.  After 3+ years, I have to believe only the dust held it together.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2017/01/17/one-media-server-to-rule-them-all-part-2/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">11</post-id>	</item>
		<item>
		<title>The HomeLab Mutation</title>
		<link>https://blog.kroy.io/2017/01/10/the_homelab_mutation/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the_homelab_mutation</link>
					<comments>https://blog.kroy.io/2017/01/10/the_homelab_mutation/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Tue, 10 Jan 2017 18:16:00 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[mediaserver]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2017/01/10/the_homelab_mutation/</guid>

					<description><![CDATA[I would be lying if I said that when I got interested in something, I don&#8217;t take it to the extreme. I&#8217;ve always had computers at home. And for at&#8230;]]></description>
										<content:encoded><![CDATA[
<p>I would be lying if I said that when I got interested in something, I don&#8217;t take it to the extreme.</p>



<hr class="wp-block-separator"/>



<p>I&#8217;ve always had computers at home.  And for at least the last 5 or 6 years, I&#8217;ve even had a full-time <a href="/one-media-server-to-rule-them-all-part-1/">server</a> running for things like Plex.</p>



<p>My HomeLab interest really started to gain speed in the first part of 2016. What started off as rewiring my home network to take advantage of future incoming Gigabit Internet, ended as a complete obsession sometime around June.</p>



<p>Now in December, it&#8217;s safe to say that the obsession has gained an <a href="http://marvel.wikia.com/wiki/Mutant_Biology">X-Gene</a> and mutated into something quite a bit uglier.</p>



<p>The first real piece of gear was an R710 that I pulled from <a href="/from-media-to-home-lab/#thepile">The Pile</a>.  After messing around with just potentially replacing my aging Ubuntu server with a more robust version (still running Ubuntu), I decided it was time to go full-tilt virtualization.</p>



<figure class="wp-block-image"><img loading="lazy" width="500" height="374" src="https://blog2.kroy.io/wp-content/uploads/2019/08/s-l500.jpg" alt="" class="wp-image-282" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/s-l500.jpg 500w, https://blog.kroy.io/wp-content/uploads/2019/08/s-l500-300x224.jpg 300w" sizes="(max-width: 500px) 100vw, 500px" /></figure>



<p>For me, ESXi is a no brainer.  ESXi is what I run in production, and this lab was eventually going to be used as a 3rd or 4th level disaster recovery for business.</p>



<p>At this point, this is a journey best told in pictures.  First goes the R710, with dual E5520 CPUs and 32GB of RAM:</p>



<h2 id="june2016">June 2016:</h2>



<figure class="wp-block-image"><img loading="lazy" width="766" height="1024" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160616_165503-766x1024.jpg" alt="" class="wp-image-285" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160616_165503-766x1024.jpg 766w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160616_165503-224x300.jpg 224w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160616_165503-768x1027.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160616_165503.jpg 909w" sizes="(max-width: 766px) 100vw, 766px" /></figure>



<p>Of course, once you have a new server, it needs to be filled up with RAM and better CPUs!  So out goes the 32GB and E5520s, and in goes 128GB and dual X5650 CPUs.</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="646" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160722_170848-1.jpg" alt="" class="wp-image-286" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160722_170848-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160722_170848-1-300x224.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160722_170848-1-768x574.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<figure class="wp-block-image"><img loading="lazy" width="864" height="646" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160701_155756-1.jpg" alt="" class="wp-image-287" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160701_155756-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160701_155756-1-300x224.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160701_155756-1-768x574.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<h2 id="july2016">July 2016</h2>



<p>As the obsession steamrolls, one server isn&#8217;t enough.  So here comes another server (R210ii, E3-1220L + 32GB RAM), some external storage to hold all of the drives, as well as a UPS to keep it all alive:</p>



<figure class="wp-block-image"><img loading="lazy" width="766" height="1024" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160727_124618-1-766x1024.jpg" alt="" class="wp-image-288" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160727_124618-1-766x1024.jpg 766w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160727_124618-1-224x300.jpg 224w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160727_124618-1-768x1027.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160727_124618-1.jpg 909w" sizes="(max-width: 766px) 100vw, 766px" /></figure>



<h2 id="september2016">September 2016</h2>



<p>More steamrolling, and 10GbE becomes a necessity!</p>



<figure class="wp-block-image"><img loading="lazy" width="824" height="561" src="https://blog2.kroy.io/wp-content/uploads/2019/08/Untitled-2.png" alt="" class="wp-image-289" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/Untitled-2.png 824w, https://blog.kroy.io/wp-content/uploads/2019/08/Untitled-2-300x204.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/Untitled-2-768x523.png 768w" sizes="(max-width: 824px) 100vw, 824px" /></figure>



<p>And the <a href="https://wiki.eth0.nl/index.php/LackRack">LackRack</a> needs rails!</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="646" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160902_115426-1.jpg" alt="" class="wp-image-290" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160902_115426-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160902_115426-1-300x224.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160902_115426-1-768x574.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<p>And of course the R710 gets replaced with an R620 (which I eventually learned had a bad motherboard)</p>



<figure class="wp-block-image"><img loading="lazy" width="766" height="1024" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160904_151108-766x1024.jpg" alt="" class="wp-image-291" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160904_151108-766x1024.jpg 766w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160904_151108-224x300.jpg 224w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160904_151108-768x1027.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160904_151108.jpg 909w" sizes="(max-width: 766px) 100vw, 766px" /></figure>



<h2 id="october2016">October 2016</h2>



<p>Unfortunately, the R620 had become unstable enough that it needed to be replaced.</p>



<p>Hello <a href="http://shop.lenovo.com/us/en/systems/servers/towers/ts140/">TS140</a> and <a href="http://www.dell.com/us/business/p/poweredge-t130/pd">T130</a>!  The T130 (E3-1230v5) was my main ESXi server and the TS140 (E3-1226v3) ran FreeNAS.</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="646" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081952-1.jpg" alt="" class="wp-image-292" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081952-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081952-1-300x224.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081952-1-768x574.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<figure class="wp-block-image"><img loading="lazy" width="864" height="646" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081943-1.jpg" alt="" class="wp-image-293" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081943-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081943-1-300x224.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20161013_081943-1-768x574.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<h2 id="novemberdecember2016">November-&gt;December 2016</h2>



<h6 id="thefinalevolution">The final evolution</h6>



<p>So as November and December rolled around, a few things became apparent.  I was using a LOT of power.  Upwards of 500 watts.  And it was LOUD.  The Seagate drives I was using required my drive enclosure fans to be set at medium-&gt;high to keep the drives in a safe range. This puts the setup firmly in low end of the &#8220;Jet Engine&#8221; range for noise level.</p>



<p>So I upgraded again.</p>



<figure class="wp-block-image"><img loading="lazy" width="768" height="1024" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_0136-768x1024.jpg" alt="" class="wp-image-294" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0136-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0136-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0136.jpg 911w" sizes="(max-width: 768px) 100vw, 768px" /></figure>



<p>A <a href="https://www.supermicro.com/products/system/Mini-ITX/SYS-E300-8D.cfm">SYS-E300-8D</a> for the file server,<br></p>



<figure class="wp-block-image"><img loading="lazy" width="768" height="1024" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_0137-768x1024.jpg" alt="" class="wp-image-295" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0137-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0137-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0137.jpg 911w" sizes="(max-width: 768px) 100vw, 768px" /></figure>



<p>a <a href="https://www.supermicro.com/products/system/midtower/5028/sys-5028d-tn4t.cfm">5028D-TN4T</a> for the virtualization server<br></p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="648" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_0135-1-1.jpg" alt="" class="wp-image-296" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0135-1-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0135-1-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_0135-1-1-768x576.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<p>and a <a href="https://www.supermicro.com/products/system/Mini-ITX/SYS-E200-9B.cfm">SYS-E200-9B</a> for pfSense.<br></p>



<p>Finally, I picked up a <a href="https://www.synology.com/en-global/products/DS2015xs">DS2015xs</a> for my main file storage. I don&#8217;t have a picture of this installed as I only had it a few days.</p>



<h2 id="landingtheplane">Landing the Plane</h2>



<p>Xeon D servers are fairly amazing.  Low power consumption, a reasonable amount of computing <em>umph</em>, and almost silent.  As of right now, my little HomeLab is pulling 180 watts under a moderate load. The lab is quiet enough now that the nearby furnace is louder than it.</p>



<p>The DS2015xs matched this paradigm nicely.  Unfortunately, it also was a bit of a dud. With the underpowered CPU and what I believe is a bug in the software, the device was almost unusable for iSCSI, which is an absolute requirement for me. So I shipped it back to NewEgg and am looking at another solution for my main file storage.</p>



<p>I&#8217;ll post an update when I figure out where I&#8217;m heading next!</p>
]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2017/01/10/the_homelab_mutation/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">12</post-id>	</item>
		<item>
		<title>From media to Home Lab</title>
		<link>https://blog.kroy.io/2017/01/07/from-media-to-home-lab/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=from-media-to-home-lab</link>
					<comments>https://blog.kroy.io/2017/01/07/from-media-to-home-lab/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Sat, 07 Jan 2017 23:09:00 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[mediaserver]]></category>
		<category><![CDATA[SysAdmin]]></category>
		<category><![CDATA[ZFS]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2017/01/07/from-media-to-home-lab/</guid>

					<description><![CDATA[For years, I&#8217;ve been running a Media server, outlined here. Over time, it&#8217;s evolved from a strict XBMC machine, to an Ubuntu server running Plex, sabnzbd, SickBeard, CouchPotato and more.&#8230;]]></description>
										<content:encoded><![CDATA[
<p>For years, I&#8217;ve been running a Media server, outlined <a href="/one-media-server-to-rule-them-all-part-1/">here</a>.  Over time, it&#8217;s evolved from a strict XBMC machine, to an Ubuntu server running Plex, sabnzbd, SickBeard, CouchPotato and more.</p>



<p>I had some concerns with the server itself.  &#8220;Old Faithful&#8221; was a three year old six-core AMD FX-6300 (upgraded from an older AM2 CPU) with 32 gb DDR3 UDIMM ECC RAM running Ubuntu and ZFSOnLinux.  And despite the motherboard, chipsets and CPU all saying they supported ECC, I really don&#8217;t think it did.  No memory or system information tests ever showed ECC capable.</p>



<p>I had lost the main SSD drive in her a few times.  A combination of older SSDs with a bunch of logging was a death knell for those drives. I was using up all the SATA ports and was probably close to lighting a fire with one of these guys (<em>edit, I&#8217;ve learned that this particular model is probably the least fire-prone.  So by accident I picked up the right one</em>):</p>



<figure class="wp-block-image"><img loading="lazy" width="500" height="375" src="https://blog2.kroy.io/wp-content/uploads/2019/08/XcRnKyE.jpg" alt="" class="wp-image-278" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/XcRnKyE.jpg 500w, https://blog.kroy.io/wp-content/uploads/2019/08/XcRnKyE-300x225.jpg 300w" sizes="(max-width: 500px) 100vw, 500px" /></figure>



<p>I didn&#8217;t exactly have room to build in redundancy for OS drives.  So every time I lost the OS SSD, it took forever to get it back up and going.  Most of the important stuff was stored on the actual ZFS array, so at least that was safe.</p>



<p>I also managed to need to RMA array drives on a far-too-regular basis (I blame WD Reds for being crappy).  My particular tower case made it a pain to actually replace said drives when they failed.</p>



<p>Finally, Plex was getting a little &#8220;kerchunky&#8221; on it.  It would handle a stream or two just fine, but anything more would negatively impact everybody connected.  While that server had 6 cores, the cores themselves just weren&#8217;t that powerful (though they were power hungry!).</p>



<p>Here is my setup before I started redoing it.</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="646" src="https://blog2.kroy.io/wp-content/uploads/2017/01/IMG_20160508_214322-2.jpg" alt="" class="wp-image-277" srcset="https://blog.kroy.io/wp-content/uploads/2017/01/IMG_20160508_214322-2.jpg 864w, https://blog.kroy.io/wp-content/uploads/2017/01/IMG_20160508_214322-2-300x224.jpg 300w, https://blog.kroy.io/wp-content/uploads/2017/01/IMG_20160508_214322-2-768x574.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<p>A DiskStation for backup.</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="648" src="https://blog2.kroy.io/wp-content/uploads/2019/08/IMG_20160919_205849-1.jpg" alt="" class="wp-image-279" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160919_205849-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160919_205849-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/IMG_20160919_205849-1-768x576.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<p>This was the last picture I took of the old girl before she got retired, after I had ripped out the ZFS array.  That&#8217;s at least 4 years of dust holding her together.</p>



<figure class="wp-block-image"><img loading="lazy" width="864" height="648" src="https://blog2.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2.jpg" alt="" class="wp-image-261" srcset="https://blog.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2.jpg 864w, https://blog.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2017/01/NBBxwq0-1-2-768x576.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<h5 id="virtualboxfornofunorprofit">VirtualBox for no fun or profit</h5>



<p>I don&#8217;t know that I want to knock VirtualBox too much.  I had been using it for years to spin up random VMs.  But it was when I started to use it for serious home development when it started to fail on me.</p>



<p>Running as a GUI, it was fine.  It just never behaved correctly as a service running under Ubuntu.  A VM that was supposed to start on boot with the server may or may not come up. And if it did, it might have corruption due to the fact that on server shutdown, it didn&#8217;t go down cleanly.</p>



<p>One thing was pretty clear to me.  I needed something else.  I wanted:</p>



<ul><li>A server with some sort of redundancy built into the OS drives.  This priority went out the window when I decided to bare-metal virtualize.</li><li>Something where I wasn&#8217;t stuffing drives into a tower case and trying to maneuver drives around PCI cards and RAM.</li></ul>



<p>It was about that time that I discovered /r/homelab on Reddit.  I followed posts there for about an hour before I <em>KNEW</em> I needed to build an actual homelab.</p>



<p><em>&#8220;Sometimes you are sitting on a mountain of gold and you don&#8217;t even realize it&#8221;</em></p>



<p>I spent the next week or so shopping on eBay for an R710.  That seemed to be the recommended server of the time.  It has some power and it wasn&#8217;t too power hungry or loud.  When I found one I liked and was priced right, I put it in my cart.  Then I realized it would probably make sense to check &#8220;The Pile&#8221; first.</p>



<h5 id="anamethepileathepile"><a name="thepile"></a>The Pile</h5>



<figure class="wp-block-image"><img loading="lazy" width="864" height="648" src="https://blog2.kroy.io/wp-content/uploads/2019/08/HusR0kTr.jpg" alt="" class="wp-image-280" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/HusR0kTr.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/HusR0kTr-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/HusR0kTr-768x576.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<figure class="wp-block-image"><img loading="lazy" width="864" height="648" src="https://blog2.kroy.io/wp-content/uploads/2019/08/8rDTFqvr-1.jpg" alt="" class="wp-image-281" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/8rDTFqvr-1.jpg 864w, https://blog.kroy.io/wp-content/uploads/2019/08/8rDTFqvr-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/8rDTFqvr-1-768x576.jpg 768w" sizes="(max-width: 864px) 100vw, 864px" /></figure>



<p><em>The Pile</em> is a mountain of retired gear  from my business that has been sitting on my floor since at least 2012.  As this HomeLab <em>WAS</em> going to have a business function (it&#8217;s running as an offsite DR site right now), I decided to dig through <em>The Pile</em> and see if there was anything worthwhile.</p>



<p>Loe and behold, a wild R710 appears:</p>



<figure class="wp-block-image"><img loading="lazy" width="500" height="374" src="https://blog2.kroy.io/wp-content/uploads/2019/08/s-l500.jpg" alt="" class="wp-image-282" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/s-l500.jpg 500w, https://blog.kroy.io/wp-content/uploads/2019/08/s-l500-300x224.jpg 300w" sizes="(max-width: 500px) 100vw, 500px" /></figure>



<p>It was modestly specced, with dual E5520 and 32 GB of RAM, but it was a start.  Continued in the <a href="/the_homelab_mutation/">HomeLab Mutation</a></p>
]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2017/01/07/from-media-to-home-lab/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">10</post-id>	</item>
		<item>
		<title>One Media Server to Rule Them All &#8211; Part 1</title>
		<link>https://blog.kroy.io/2017/01/02/one-media-server-to-rule-them-all-part-1/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=one-media-server-to-rule-them-all-part-1</link>
					<comments>https://blog.kroy.io/2017/01/02/one-media-server-to-rule-them-all-part-1/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Mon, 02 Jan 2017 17:42:00 +0000</pubDate>
				<category><![CDATA[mediaserver]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2017/01/02/one-media-server-to-rule-them-all-part-1/</guid>

					<description><![CDATA[After The Burning, it&#8217;s really not that difficult to understand why I wanted to take control of my media. I felt betrayed and stabbed in the back by my oldest&#8230;]]></description>
										<content:encoded><![CDATA[
<p>After <a href="/a-movieman/">The Burning</a>, it&#8217;s really not that difficult to understand why I wanted to take control of my media.  I felt betrayed and stabbed in the back by my oldest and best friend.  So I would do what any sane person would do.  I would stab them back.</p>



<h3 id="theprealpha">The Pre-Alpha</h3>



<p>The first &#8220;Media&#8221; server consisted of nothing really more than moving files back on forth on USB Sticks from my computer.  Once the media was on the USB stick, I would plug it into my Xbox 360 or PS3, and later a fancy DVD player given to me by my brother-in-law.</p>



<p>Unfortunately, when you are on a mission to rip and encode every piece of media you can find, it doesn&#8217;t take long to fill up drives.  And it becomes more and more of a hassle relying on moving USB sticks back and forth.</p>



<p>As it didn&#8217;t take long for my collection to spill out and over my computer hard drive, I wanted to have a slightly better external solution.</p>



<p><a id="exthd"></a><br>Remember these guys?</p>



<figure class="wp-block-image"><img loading="lazy" width="1024" height="1024" src="https://blog2.kroy.io/wp-content/uploads/2019/08/snbZC3r-1024x1024.jpg" alt="" class="wp-image-275" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/snbZC3r-1024x1024.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/snbZC3r-150x150.jpg 150w, https://blog.kroy.io/wp-content/uploads/2019/08/snbZC3r-300x300.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/snbZC3r-768x768.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/snbZC3r.jpg 1500w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>I wish I could forget them.  I had two of them. One for TV and one for movies.</p>



<h5 id="stilltheprealpha">Still the Pre-Alpha</h5>



<p>My solution at the time essentially involved storing media on the external hard drives and then carting it back and forth between the XBox/PS3 and the computer when I wanted to load new media.  While this worked, it had a number of notable problems.</p>



<ul><li>Despite being somewhat mobile by design, these enclosures with full 3.5&#8243; drives inside of them <strong>REALLY</strong> don&#8217;t like being moved around.  I was almost constantly losing data to bad sectors.  And of course because I only had a pair of drives, each holding a different kind of content, that meant that I had zero redundancy.</li><li>I was regularly running into media that the XBox or PS3 wouldn&#8217;t play natively due to encoding.  And of course the XBox and PS3 supported different media types, so I would have to move the drives between them when I ran into something I couldn&#8217;t play.  Of course, more often than not, neither one worked.</li></ul>



<h5 id="enterthedlna">Enter the DLNA</h5>



<p>DLNA was one of the available solutions at the time.  Using my Desktop computer, I could hook up both of my drives at once (WHATATTTT????) and run  a program like PS3MediaServer.  While this worked pretty good, it still had problems.  I still ran into files that I just couldn&#8217;t play.  For a long time an MKV file was the bane of my existence.  DLNA also spit out a directory dump of files rather than an actual meaningful library of data.</p>



<p>It was around this time where data loss started to become a very real problem.  On almost a daily basis, I would be watching some media and have it crash due to bad sectors on my drives.</p>



<p>I needed something. FreeNAS was the answer <a href="/one-media-server-to-rule-them-all-part-2/">continued in part 2&#8230;</a></p>
]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2017/01/02/one-media-server-to-rule-them-all-part-1/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">9</post-id>	</item>
		<item>
		<title>A #MovieMan</title>
		<link>https://blog.kroy.io/2017/01/01/a-movieman/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=a-movieman</link>
					<comments>https://blog.kroy.io/2017/01/01/a-movieman/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Sun, 01 Jan 2017 22:28:00 +0000</pubDate>
				<category><![CDATA[mediaserver]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2017/01/01/a-movieman/</guid>

					<description><![CDATA[I have always been a HUGE consumer of media. Even before Netflix, there was nothing better for me than spending a whole weekend vegging out and binge watching my favorite&#8230;]]></description>
										<content:encoded><![CDATA[
<p>I have always been a HUGE consumer of media.  Even before Netflix, there was nothing better for me than spending a whole weekend vegging out and binge watching my favorite TV Shows.</p>



<h3 id="thebeginning">The Beginning</h3>



<p>It must have been around 2002 when I started buying and collecting DVDs.  I remember my first DVD was <em>The 13th Warrior</em> of all things.  From movie DVDs, it was a natural progression to Television show sets.</p>



<p>At the time, there weren&#8217;t a lot of them. HBO led the pack with <em>Sopranos</em>, and they also led the pack with price.  Over $100 for a DVD set and nobody had problems paying it.  There was no other way to get the content.</p>



<p>But I remember buying the first couple of seasons of <em>Buffy the Vampire Slayer</em> and the first season of <em>Stargate SG-1</em>.  After that, it was all downhill.</p>



<p>Every Tuesday I was in line at Best Buy picking up a new movie or TV Box set.  Especially at the beginning, the releases were FAR behind the actual airing of the shows.  I waited <em>SOOOOOO</em> long for Season 4 of <em>Stargate SG-1</em> to be released, because happened to randomly catch <em>Window of Opportunity</em> one afternoon, and I was aching to rewatch it.</p>



<p>After 7 or 8 years of this, I had amassed a legal DVD collection of over 450 movies and 200 or more seasons of television shows. The natural progression was to go digital.</p>



<h3 id="theburning">The Burning</h3>



<p>Around the time <em>Get Him to the Greek</em> was released on DVD, I decided it was time to start going digital.  The reason for this was simple.  All that media took up a veritable BUTTLOAD of space. I had shelves full of DVDs, walls lined with cases, and I was still tripping over even more DVDs.</p>



<p>So I went on Amazon and paid full DVD price for a copy of &#8220;Get Him to the Greek&#8221;.  A few months later, I wanted to watch the movie.  I logged onto Amazon, found it in my library, and saw this message:</p>



<blockquote class="wp-block-quote"><p>Due to licensing restrictions, videos can become temporarily unavailable for viewing or downloading. The video will automatically be made available again once that restriction ends.<br>Availability of videos for purchase, re-download, or access from a backup copy is determined by the owners of the content. On very rare occasions, a video you previously purchased may become unavailable.</p></blockquote>



<p>Rare occasions my ass.  Literally a full half of the two dozen or so items in my library were unavailable.  Essentially HBO or someone had exclusive rights to stream <em>Universal Studios</em> content, so Amazon was forced to deny me access to the media I had purchased.</p>



<p>I was in shock.  Absolute shock.  Here I had paid full price for a movie and I couldn&#8217;t access it. Did Amazon give me refunds?  Sure, on most of it.  But that wasn&#8217;t the point.  That was when I realized that I was the #1Fan of movie studios everywhere, but they didn&#8217;t give a crap about me.  Heck, 100 of people like me and a DVD publisher could stay in business for a year.</p>



<p>The point was clear:  <em><strong>I DID NOT OWN MY MEDIA</strong></em>.</p>



<h3 id="therecovery">The Recovery</h3>



<p>To be honest, I had been growing more and more disillusioned with the movie studios for a long time.  You may not remember the DVD release of <em>Harry Potter and the Sorcerer&#8217;s Stone</em>, but I do.  It was two discs of epic awesomeness.  I must have spent 5 or 10 hours just exploring the DVD menus, games, easter eggs, and other features on those two discs.  And how much did it cost?  $19.99</p>



<p>Fast forward a few years to the release of <em>Harry Potter and the Prisoner of Azkaban</em>.  No extras and you were lucky to get a Director&#8217;s commentary.  And it was <em>MORE</em> expensive.  By the time Goblet of Fire rolled around you were lucky if there was a piece of paper with a picture on it in the case.</p>



<p>The seventeen releases/re-releases of <em>Avatar</em>?  More greed.  A movie where the $50 special edition with 5 discs was released in October, but the regular single disc &#8220;movie-only&#8221; edition wasn&#8217;t released until a full month later in November.  Even more greed.</p>



<p>I&#8217;d had it.  Enter the <a href="/one-media-server-to-rule-them-all-part-1/">Media Server to Rule them All</a></p>
]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2017/01/01/a-movieman/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">8</post-id>	</item>
	</channel>
</rss>
