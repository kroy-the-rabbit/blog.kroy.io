<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	
	xmlns:georss="http://www.georss.org/georss"
	xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#"
	>

<channel>
	<title>HomeLab &#8211; blog.kroy.io</title>
	<atom:link href="https://blog.kroy.io/category/homelab/feed/" rel="self" type="application/rss+xml" />
	<link>https://blog.kroy.io/</link>
	<description>computers, tech, and whatever other random stuff crosses my mind.</description>
	<lastBuildDate>Tue, 29 Oct 2019 04:12:38 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.4.2</generator>

<image>
	<url>https://blog.kroy.io/wp-content/uploads/2020/04/cropped-android-chrome-512x512-3-32x32.png</url>
	<title>HomeLab &#8211; blog.kroy.io</title>
	<link>https://blog.kroy.io/</link>
	<width>32</width>
	<height>32</height>
</image> 
<site xmlns="com-wordpress:feed-additions:1">166765678</site>	<item>
		<title>The Great Rack Migration &#8211; Dell R420</title>
		<link>https://blog.kroy.io/2019/10/28/the-great-rack-migration-dell-r420/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the-great-rack-migration-dell-r420</link>
					<comments>https://blog.kroy.io/2019/10/28/the-great-rack-migration-dell-r420/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Mon, 28 Oct 2019 18:51:24 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[Rack Migration]]></category>
		<guid isPermaLink="false">https://blog.kroy.io/?p=415</guid>

					<description><![CDATA[This post continues my migration into my new rack. After migrating the X10SRH, I really thought I was done. Everything was now in the rack and working like it should.&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" data-a2a-url="https://blog.kroy.io/2019/10/28/the-great-rack-migration-dell-r420/" data-a2a-title="The Great Rack Migration – Dell R420"></a></p>
<p>This post continues my migration into my new rack.</p>



<hr class="wp-block-separator"/>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-13.png" alt="" class="wp-image-416" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-13.png 658w, https://blog.kroy.io/wp-content/uploads/2019/10/image-13-300x72.png 300w" sizes="(max-width: 658px) 100vw, 658px" /></figure>



<p>After migrating the <a href="https://blog.kroy.io/2019/10/28/the-great-rack-migration-x10srh-clnf/">X10SRH</a>, I really thought I was done.  Everything was now in the rack and working like it should.</p>



<p>My Dell PowerEdge R420 acts as my primary NAS.  It&#8217;s a dual E5-2620v2, 256GB of RAM, an SFF-8088 HBA, with a 10Gb NIC.  This runs Debian and stores many terabytes of data on top of ZFS.</p>



<p>The problem was this device bottlenecks me and many of my future plans.  With room for only one PCIe card, I am forced to use SAS uplinks on shelves to connect all the drives.  This creates a serious performance bottleneck.  In the future, I also want to add 40Gb networking, and the lack of PCIe slots limits me there too.  </p>



<hr class="wp-block-separator"/>



<p>The Server Store has quickly become my new go-to for buying hardware, and this time was no exception.  For $349, I could get a dual CPU Supermicro X9DRI board, a Supermicro 846 (24 bay) case and a pair of low TDP E5 v2 Xeons on one of their <a rel="noreferrer noopener" aria-label="specials (opens in a new tab)" href="https://www.theserverstore.com/SuperMicro-4U-CSE-846-24-Bay-SAS2-BP-w-X9DRi-F2x-6-Core-E5-2630Lv2-24Ghz-16GB-IT-MODE-W-Rails_p_925.html" target="_blank">specials</a>.  Consider I could reuse my pile of RAM <em>AND</em> it included a SAS2 HBA, it didn&#8217;t take too long to hit the button on that one.</p>



<hr class="wp-block-separator"/>



<h3>Let&#8217;s do it</h3>



<p>This was a pretty simple build.  90% of the work was done for me as the system was already built.  All I had to do is pull some RAM:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0448-768x1024.jpg" alt="" class="wp-image-423" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0448-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0448-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0448-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0448-850x1133.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0448.jpg 914w" sizes="(max-width: 768px) 100vw, 768px" /></figure>



<p>Well, now that was a lie.  The <em>ACTUAL</em> hard part was migrating drives.</p>



<p>So. Many. Drives.</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-15.png" alt="" class="wp-image-424" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-15.png 894w, https://blog.kroy.io/wp-content/uploads/2019/10/image-15-300x270.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-15-768x691.png 768w, https://blog.kroy.io/wp-content/uploads/2019/10/image-15-850x764.png 850w" sizes="(max-width: 894px) 100vw, 894px" /></figure>



<p>and more:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-16-854x1024.png" alt="" class="wp-image-425" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-16-854x1024.png 854w, https://blog.kroy.io/wp-content/uploads/2019/10/image-16-250x300.png 250w, https://blog.kroy.io/wp-content/uploads/2019/10/image-16-768x921.png 768w, https://blog.kroy.io/wp-content/uploads/2019/10/image-16-300x360.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-16-850x1019.png 850w, https://blog.kroy.io/wp-content/uploads/2019/10/image-16.png 876w" sizes="(max-width: 854px) 100vw, 854px" /></figure>



<p>I also had a few SSDs to mount up.  Note that this is an HP drive, in a Dell 2.5-&gt;3.5 adapter, into a Supermicro drive tray:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-17.png" alt="" class="wp-image-426" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-17.png 1000w, https://blog.kroy.io/wp-content/uploads/2019/10/image-17-300x230.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-17-768x588.png 768w, https://blog.kroy.io/wp-content/uploads/2019/10/image-17-850x651.png 850w" sizes="(max-width: 1000px) 100vw, 1000px" /></figure>



<hr class="wp-block-separator"/>



<h3>Conclusion</h3>



<p>The only issue I had was that the boot drive wouldn&#8217;t boot due to missing EFI NVRAM.  I covered how to fix <a href="https://blog.kroy.io/2019/10/28/migrating-a-efi-linux-install-to-a-new-server/">HERE</a>.</p>



<p>Welp, that&#8217;s it.  I&#8217;ve migrated all my servers to a rack.  If you&#8217;ve been following this so far, I hope you have enjoyed the ride!</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-18-488x1024.png" alt="" class="wp-image-427" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-18-488x1024.png 488w, https://blog.kroy.io/wp-content/uploads/2019/10/image-18-143x300.png 143w, https://blog.kroy.io/wp-content/uploads/2019/10/image-18-300x630.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-18.png 558w" sizes="(max-width: 488px) 100vw, 488px" /></figure>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-dell-r420%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20Dell%20R420" data-a2a-url="https://blog.kroy.io/2019/10/28/the-great-rack-migration-dell-r420/" data-a2a-title="The Great Rack Migration – Dell R420"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2019/10/28/the-great-rack-migration-dell-r420/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">415</post-id>	</item>
		<item>
		<title>The Great Rack Migration – X10SRH-CLNF</title>
		<link>https://blog.kroy.io/2019/10/28/the-great-rack-migration-x10srh-clnf/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the-great-rack-migration-x10srh-clnf</link>
					<comments>https://blog.kroy.io/2019/10/28/the-great-rack-migration-x10srh-clnf/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Mon, 28 Oct 2019 18:13:31 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[Rack Migration]]></category>
		<guid isPermaLink="false">https://blog.kroy.io/?p=396</guid>

					<description><![CDATA[This post continues my migration into my new rack. The X10SRH is my primary hypervisor. It holds a Xeon E5-2640v4 and is full of 32 gigabyte sticks of RAM. It&#8217;s&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" data-a2a-url="https://blog.kroy.io/2019/10/28/the-great-rack-migration-x10srh-clnf/" data-a2a-title="The Great Rack Migration – X10SRH-CLNF"></a></p>
<p>This post continues my migration into my new rack.</p>



<hr class="wp-block-separator"/>



<p>The <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://amzn.to/2PsS8Z5" target="_blank">X10SRH</a> is my primary hypervisor.  It holds a <a rel="noreferrer noopener" aria-label="Xeon E5-2640v4 (opens in a new tab)" href="https://amzn.to/2PsS8Z5" target="_blank">Xeon E5-2640v4</a> and is full of 32 gigabyte sticks of RAM.  </p>



<p></p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/1-Q6LuXIt-1024x768.jpg" alt="" class="wp-image-397" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/1-Q6LuXIt-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/1-Q6LuXIt-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/1-Q6LuXIt-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/1-Q6LuXIt-850x638.jpg 850w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption><a href="https://amzn.to/2Ps7GMM" target="_blank" rel="noreferrer noopener" aria-label="Fractal Design R4 (opens in a new tab)">Fractal Design R4</a></figcaption></figure>



<p>It&#8217;s lived in a <a rel="noreferrer noopener" aria-label="Fractal Design R4  (opens in a new tab)" href="https://amzn.to/2Ps7GMM" target="_blank">Fractal Design R4 </a>case for years, and I love that case.  When packed full of 140mm fans, it&#8217;s got the room for 10 3.5&#8243; HDDs, a few SSDs, and an insanely large cooler.  Once the fan on that cooler died and the temps still never went above 31C at full load.</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-12.png" alt="" class="wp-image-401" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-12.png 512w, https://blog.kroy.io/wp-content/uploads/2019/10/image-12-253x300.png 253w, https://blog.kroy.io/wp-content/uploads/2019/10/image-12-300x356.png 300w" sizes="(max-width: 512px) 100vw, 512px" /></figure>



<p>The case also make it so all the PCIe slots are available.  So I&#8217;ve got an HBA (9201-16e), a nVidia Quadro P2000 for Plex transcoding, extra space for additional networking cards, and the ability to add more if necessary.</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/2-ezst7Ug-1024x768.jpg" alt="" class="wp-image-398" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/2-ezst7Ug-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/2-ezst7Ug-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/2-ezst7Ug-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/2-ezst7Ug-850x638.jpg 850w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>\</figcaption></figure>



<hr class="wp-block-separator"/>



<p>So when on the hunt for a replacement case, the obvious option seemed like some kind of 4U.  The Supermicro 846 seemed like a no-brainer:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-10.png" alt="" class="wp-image-399"/></figure>



<p>It would allow me to keep my <a rel="noreferrer noopener" aria-label="current i4 CPU cooler (opens in a new tab)" href="https://amzn.to/2WjG6To" target="_blank">current i4 CPU cooler</a> and all my PCIe cards would plug in without any hassle.</p>



<p>So I ordered an empty case from TheServerStore.com, and waited a week or so.  </p>



<p>Even though it *SHOULD* have fit, before the new case arrived, I started to suspect that the existing cooler would not fit based on some rough measurements.  Because I didn&#8217;t want to get stuck, I just ordered the new <a rel="noreferrer noopener" aria-label="3U cooler (opens in a new tab)" href="https://amzn.to/36cPCfO" target="_blank">3U cooler</a> just to be safe.</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-11.png" alt="" class="wp-image-400" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-11.png 482w, https://blog.kroy.io/wp-content/uploads/2019/10/image-11-268x300.png 268w, https://blog.kroy.io/wp-content/uploads/2019/10/image-11-300x336.png 300w" sizes="(max-width: 482px) 100vw, 482px" /></figure>



<p>Although buying a cooler should be simple, it took some hunting as my board only supports narrow ILM.</p>



<hr class="wp-block-separator"/>



<h2>The Build</h2>



<p>The actual migration went smoothly.  All the PCIe cards came out:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/3-wwsed8I-1024x768.jpg" alt="" class="wp-image-402" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/3-wwsed8I-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/3-wwsed8I-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/3-wwsed8I-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/3-wwsed8I-850x638.jpg 850w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>The board got installed:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/4-p7LBhNk-1024x768.jpg" alt="" class="wp-image-403" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/4-p7LBhNk-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/4-p7LBhNk-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/4-p7LBhNk-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/4-p7LBhNk-850x638.jpg 850w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>And I tried to put the top on the case.  As expected, the fit was *VERY* tight.  I suspect it might have worked because the difference was only a few millimeters, but:</p>



<ul><li>It would have put pressure on the CPU.</li><li>The orientation for airflow was wrong anyway.</li></ul>



<p>So I pulled the old cooler:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/6-w8F2tkU-1024x768.jpg" alt="" class="wp-image-405" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/6-w8F2tkU-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/6-w8F2tkU-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/6-w8F2tkU-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/6-w8F2tkU-850x638.jpg 850w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>Cleaned up the CPU with some alcohol and coffee filters</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/7-lOW1wxD-768x1024.jpg" alt="" class="wp-image-404" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/7-lOW1wxD-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/7-lOW1wxD-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/7-lOW1wxD-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/7-lOW1wxD-850x1133.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/7-lOW1wxD.jpg 1966w" sizes="(max-width: 768px) 100vw, 768px" /></figure>



<p>The new cooler installed and mounted:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/8-3KWKfEi-1024x768.jpg" alt="" class="wp-image-406" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/8-3KWKfEi-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/8-3KWKfEi-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/8-3KWKfEi-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/8-3KWKfEi-850x638.jpg 850w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<hr class="wp-block-separator"/>



<h3>Finishing it up</h3>



<p>All that remained was to hook up the fans, and wire up the SSD.  Because the case I ordered has a SAS2 expander backplane, and that backplane is getting passed through to a different server via a <a rel="noreferrer noopener" aria-label="SFF-8088 to SFF-8087 adapter (opens in a new tab)" href="https://amzn.to/2Wn9XdS" target="_blank">SFF-8088 to SFF-8087 adapter</a>, the SSD needed to be inside the case connected to onboard SATA.</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/9-JqI95AF-768x1024.jpg" alt="" class="wp-image-407" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/9-JqI95AF-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/9-JqI95AF-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/9-JqI95AF-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/9-JqI95AF-850x1133.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/9-JqI95AF.jpg 1966w" sizes="(max-width: 768px) 100vw, 768px" /></figure>



<p>At this point, the sharp-eyed might notice a PCIe placeholder shoved in between the fan banks and the backplane.  Yep, that&#8217;s still there, because I didn&#8217;t notice that until I was looking through pictures.<br></p>



<p>The final picture, with the SFF adapter wired into the backplane.  Once again, the PCIe blank is there.  I just haven&#8217;t had a reason to derack it and pull it.  </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/10-VovEUwy.jpg" alt="" class="wp-image-408" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/10-VovEUwy.jpg 594w, https://blog.kroy.io/wp-content/uploads/2019/10/10-VovEUwy-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/10-VovEUwy-300x400.jpg 300w" sizes="(max-width: 594px) 100vw, 594px" /></figure>



<p>And finally, all racked up (this is the one with yellow tabs):</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM-568x1024.jpg" alt="" class="wp-image-409" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM-568x1024.jpg 568w, https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM-166x300.jpg 166w, https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM-768x1385.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM-300x541.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM-850x1533.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/11-0pWRvfM.jpg 1340w" sizes="(max-width: 568px) 100vw, 568px" /></figure>



<p>One more to go with the R420&#8230;</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F28%2Fthe-great-rack-migration-x10srh-clnf%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20X10SRH-CLNF" data-a2a-url="https://blog.kroy.io/2019/10/28/the-great-rack-migration-x10srh-clnf/" data-a2a-title="The Great Rack Migration – X10SRH-CLNF"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2019/10/28/the-great-rack-migration-x10srh-clnf/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">396</post-id>	</item>
		<item>
		<title>The Great Rack Migration &#8211; D1541</title>
		<link>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1541/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the-great-rack-migration-d1541</link>
					<comments>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1541/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Mon, 07 Oct 2019 18:52:34 +0000</pubDate>
				<category><![CDATA[ESXi]]></category>
		<category><![CDATA[Hardware]]></category>
		<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[Rack Migration]]></category>
		<guid isPermaLink="false">https://blog.kroy.io/?p=376</guid>

					<description><![CDATA[This post continues my migration into my new rack. As more and more parts arrived, it became time to migrate my Supermicro 5028D-TN4T. This tiny little server packs quite the&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" data-a2a-url="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1541/" data-a2a-title="The Great Rack Migration – D1541"></a></p>
<p>This post continues my migration into my new rack.</p>



<hr class="wp-block-separator"/>



<p>As more and more parts arrived, it became time to migrate my <a href="https://amzn.to/2OrEViX">Supermicro 5028D-TN4T</a>.  This tiny little server packs quite the punch, with an 8c16t Supermicro D1541 and plays a role of one of my ESXi servers.</p>



<p>Again, as before with my <a href="https://blog.kroy.io/2017/03/13/whiteboxing-a-1u/">Whiteboxing a 1U series</a>, I knew pretty much all the parts that I needed to get, except this time I got the <a href="https://amzn.to/2Ooa9HL">rear I/O version of the 1U short depth case</a>.</p>



<p>The parts list is pretty extensive.  Fortunately, because Supermicro sells a server like this, I can use the parts list for the <a href="https://amzn.to/33lc2t5">Supermicro 5018D-FN4T</a>.  </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-6-1024x771.png" alt="" class="wp-image-377" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-6-1024x771.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/image-6-300x226.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-6-768x579.png 768w, https://blog.kroy.io/wp-content/uploads/2019/10/image-6-850x640.png 850w, https://blog.kroy.io/wp-content/uploads/2019/10/image-6.png 1026w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>parts list</figcaption></figure>



<p>The short list:</p>



<ul><li>The case</li><li>Riser card bracket</li><li>x16 Riser card</li><li>some fans and brackets</li><li>an I/O shield</li><li>an 2.5&#8243; SSD/HDD Bracket</li></ul>



<p>Sheesh.  It&#8217;s a long list, some of the parts were a bit hard to find, so it took a few weeks for everything to arrive.</p>



<h2>The build</h2>



<p>Once everything arrived, I dug the old bird out of the corner, and started disassembly.  It was VERY dusty:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0376-768x1024.jpg" alt="" class="wp-image-378" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0376-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0376-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0376-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0376-850x1134.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0376.jpg 872w" sizes="(max-width: 768px) 100vw, 768px" /><figcaption>dusty</figcaption></figure>



<p>And a terrible picture of the inside:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0377-1024x768.jpg" alt="" class="wp-image-379" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0377-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0377-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0377-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0377-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0377.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>inside</figcaption></figure>



<p>And the board is extricated:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0378-768x1024.jpg" alt="" class="wp-image-380" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0378-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0378-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0378-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0378-850x1134.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0378.jpg 872w" sizes="(max-width: 768px) 100vw, 768px" /><figcaption>extricated</figcaption></figure>



<h2>The new home</h2>



<p>The new case is SOOOO much better than the rear I/O version.  There&#8217;s actually room for all the cables from the PSU.  </p>



<p>On the front I/O version, you usually just end up with an ugly bulge in the front:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0379-1024x768.jpg" alt="" class="wp-image-382" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0379-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0379-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0379-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0379-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0379.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>new case</figcaption></figure>



<p>The top-left corner of the following image definitely demonstrates what I&#8217;m talking about with front vs rear I/O:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0380-2-1024x768.jpg" alt="" class="wp-image-383" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0380-2-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0380-2-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0380-2-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0380-2-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0380-2.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>rear io cleanliness</figcaption></figure>



<p>vs the mess in the front I/O version:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-7.png" alt="" class="wp-image-384" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-7.png 656w, https://blog.kroy.io/wp-content/uploads/2019/10/image-7-243x300.png 243w, https://blog.kroy.io/wp-content/uploads/2019/10/image-7-300x371.png 300w" sizes="(max-width: 656px) 100vw, 656px" /><figcaption>front io mess</figcaption></figure>



<p>Everything installed.  I reused the fan brackets from my old SYS-E300-8D, and tracked down an internal USB header that fit.  The pictured one was too tall:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0381-1-1024x768.jpg" alt="" class="wp-image-385" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0381-1-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0381-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0381-1-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0381-1-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0381-1.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>all installed</figcaption></figure>



<p>I installed two fans as eventually this board will be receiving a 40Gb upgrade. As with the <a href="/2019/10/07/the-great-rack-migration-d1521/">D1521 build</a>, it was LOUD.  I installed a pair low-noise adapters, and the problem was fixed, and the server stays nice and cool:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-8-1024x166.png" alt="" class="wp-image-386" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-8-1024x166.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/image-8-300x49.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-8-768x125.png 768w, https://blog.kroy.io/wp-content/uploads/2019/10/image-8-850x138.png 850w, https://blog.kroy.io/wp-content/uploads/2019/10/image-8.png 1385w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>All things considered, this build went very smoothly. </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-9.png" alt="" class="wp-image-387" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-9.png 633w, https://blog.kroy.io/wp-content/uploads/2019/10/image-9-300x71.png 300w" sizes="(max-width: 633px) 100vw, 633px" /><figcaption>racked</figcaption></figure>



<p> The case looks nice all racked up and is basically dead silent.  I might even consider replacing the <a href="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/">D1521 build</a> with the rear I/O version if they weren&#8217;t so expensive.</p>



<p>Continued in the <a href="/2019/10/28/the-great-rack-migration-x10srh-clnf/">X10SRH migration</a>.</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1541%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20D1541" data-a2a-url="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1541/" data-a2a-title="The Great Rack Migration – D1541"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1541/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">376</post-id>	</item>
		<item>
		<title>The Great Rack Migration &#8211; D1521</title>
		<link>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the-great-rack-migration-d1521</link>
					<comments>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Mon, 07 Oct 2019 16:43:37 +0000</pubDate>
				<category><![CDATA[ESXi]]></category>
		<category><![CDATA[Hardware]]></category>
		<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[Proxmox]]></category>
		<category><![CDATA[Rack Migration]]></category>
		<category><![CDATA[Routing]]></category>
		<guid isPermaLink="false">https://blog.kroy.io/?p=352</guid>

					<description><![CDATA[As part of my continued rack migration, it was time to move the D1521. My Supermicro D-1521 host is my &#8220;whatever I need it to be&#8221; server. As I test&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" data-a2a-url="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/" data-a2a-title="The Great Rack Migration – D1521"></a></p>
<p>As part of my continued rack migration, it was time to move the D1521.</p>



<hr class="wp-block-separator"/>



<p>My Supermicro D-1521 host is my &#8220;whatever I need it to be&#8221; server.  As I test and lab different topics, it becomes a Proxmox host, ESXi host, KVM, router, etc.  Whatever I need it to be basically.  <br></p>



<p>Fortunately, this migration is just reusing parts from my <a href="https://blog.kroy.io/2017/03/13/whiteboxing-a-1u/">Whiteboxing a 1U series</a>. Which meant I had mostly already gone through the pain and had all parts on hand.</p>



<hr class="wp-block-separator"/>



<h2>The original home<br></h2>



<p>The &#8220;original&#8221; home for this server was a solid <a href="https://www.amazon.com/gp/product/B00DU6RVK8/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00DU6RVK8&amp;linkCode=as2&amp;tag=blogkroyio10-20&amp;linkId=10d8e867e5c30bbd8e0c428b64f0b77a">Silverstone HTPC Case</a>. </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0301-1024x768.jpg" alt="" class="wp-image-353" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0301-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0301-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0301-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0301-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0301.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>For a tiny case, the airflow is very decent, probably due to the huge fan that floats over the main board.  Though the PCIe slot needs a bit of extra love:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0300-1024x768.jpg" alt="" class="wp-image-355" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0300-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0300-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0300-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0300-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0300.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p></p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0298-1024x768.jpg" alt="" class="wp-image-356" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0298-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0298-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0298-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0298-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0298.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<hr class="wp-block-separator"/>



<h2>The final home</h2>



<p>I reused the old <a href="https://www.amazon.com/gp/product/B0093HNUD0/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B0093HNUD0&amp;linkCode=as2&amp;tag=blogkroyio10-20&amp;linkId=cff5dd63646471670d9f6ede771d735e&quot;>Supermicro Rack Mount Server Chassis CSE-505-203B</a><img src=&quot;//ir-na.amazon-adsystem.com/e/ir?t=blogkroyio10-20&amp;l=am2&amp;o=1&amp;a=B0093HNUD0">1U short depth Supermicro case</a> from my prior build.  </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0382-1024x768.jpg" alt="" class="wp-image-358" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0382-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0382-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0382-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0382-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0382.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>1u installed</figcaption></figure>



<p>And what it looks like when I&#8217;m in labbing mode and changing things around:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0393-1024x768.jpg" alt="" class="wp-image-359" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0393-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0393-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0393-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0393-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0393.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>You might notice some electrical tape holding down the fan.  The stock fan placement in this case is inefficient for these XeonD boards.  The fan ends up missing the CPU almost completely. </p>



<p>My original setup incorporated a lack rack, so the front facing I/O was okay.  In the rack setup, it&#8217;s just means I need an extra <a href="https://www.amazon.com/gp/product/B00BTRD4Y2/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00BTRD4Y2&amp;linkCode=as2&amp;tag=blogkroyio10-20&amp;linkId=b41df4dd8754780fcfe06415aa30f631">1U brush panel</a>:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-2.png" alt="" class="wp-image-357" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-2.png 662w, https://blog.kroy.io/wp-content/uploads/2019/10/image-2-300x68.png 300w" sizes="(max-width: 662px) 100vw, 662px" /></figure>



<p>The final piece that I need to add was a <a href="https://amzn.to/2Ot30Gc">low-noise adapter</a> for the fan.  Considering the D1541 was going into a similar case, a three pack was good enough.</p>



<p>This server was by FAR the most loud thing in my rack, and even on optimal settings the fan was too loud.  With the adapter, it&#8217;s nice and cool (and silent):</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-3-1024x69.png" alt="" class="wp-image-360" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-3-1024x69.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/image-3-300x20.png 300w, https://blog.kroy.io/wp-content/uploads/2019/10/image-3-768x52.png 768w, https://blog.kroy.io/wp-content/uploads/2019/10/image-3-850x58.png 850w, https://blog.kroy.io/wp-content/uploads/2019/10/image-3.png 1415w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>To be continued on <a href="/2019/10/07/the-great-rack-migration-d1541/">the D1541</a>.</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1521%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20D1521" data-a2a-url="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/" data-a2a-title="The Great Rack Migration – D1521"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">352</post-id>	</item>
		<item>
		<title>The Great Rack Migration &#8211; D1518</title>
		<link>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1518/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the-great-rack-migration-d1518</link>
					<comments>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1518/#comments</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Mon, 07 Oct 2019 16:43:22 +0000</pubDate>
				<category><![CDATA[Hardware]]></category>
		<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[Rack Migration]]></category>
		<category><![CDATA[Storage]]></category>
		<guid isPermaLink="false">https://blog.kroy.io/?p=337</guid>

					<description><![CDATA[So after a number of years labbing, I decided it&#8217;s time to graduate to a rack. This is my series of posts documenting the migration. I deal with a lot&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" data-a2a-url="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1518/" data-a2a-title="The Great Rack Migration – D1518"></a></p>
<p>So after a number of years labbing, I decided it&#8217;s time to graduate to a rack.  This is my series of posts documenting the migration.</p>



<hr class="wp-block-separator"/>



<p>I deal with a lot of storage in my lab, and a huge focus has always been keeping the lab as quiet as possible.  This meant I deployed everything in tower cases.</p>



<p>While this goal of &#8220;as quiet as possible&#8221; has been realized, what&#8217;s also been realized is a mess.  </p>



<p><em><strong>A huge mess.  </strong></em><br></p>



<p>This was a good day after a cleanup:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_1071-1-1024x768.jpg" alt="" class="wp-image-374" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_1071-1-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_1071-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_1071-1-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_1071-1-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_1071-1.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>And this was the results of that cleanup:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-4.png" alt="" class="wp-image-372" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-4.png 658w, https://blog.kroy.io/wp-content/uploads/2019/10/image-4-280x300.png 280w, https://blog.kroy.io/wp-content/uploads/2019/10/image-4-300x322.png 300w" sizes="(max-width: 658px) 100vw, 658px" /><figcaption>the results on a bad day</figcaption></figure>



<p>So maybe it&#8217;s just me growing older (and my hearing going a little), and having a desire for a bit more organization, but recently I decided to bite the bullet and get a rack, the <a href="https://www.amazon.com/gp/product/B00O6GNLQE/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=B00O6GNLQE&amp;linkCode=as2&amp;tag=blogkroyio10-20&amp;linkId=c4e6452c5106cf3265f3632f10bd861c">Startech 25U adjustable rack</a> to be exact.</p>



<h2>The original home</h2>



<p>The first server to be migrated was a trusty old D-1518 fileserver in a U-NAS case.  </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0366-1024x768.jpg" alt="" class="wp-image-339" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0366-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0366-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0366-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0366-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0366.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>NSC-810A</figcaption></figure>



<p>I will say, that U-NAS case is pretty nice.  It&#8217;s all rubberized and has a nice premium feel to it.  The inside of the case is pretty tight, and I threw the fan block from the original SYS-E300-8D case to keep the CPU and HBA nice and cool:</p>



<p></p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0367-1-1024x768.jpg" alt="" class="wp-image-340" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0367-1-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0367-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0367-1-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0367-1-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0367-1.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>u-nas guts</figcaption></figure>



<hr class="wp-block-separator"/>



<h2>The New Home</h2>



<p>The new home for this server was a Supermicro CSE-826 case. </p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0364-768x1024.jpg" alt="" class="wp-image-338" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0364-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0364-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0364-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0364-850x1134.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0364.jpg 872w" sizes="(max-width: 768px) 100vw, 768px" /><figcaption>so much room for activities!</figcaption></figure>



<p>The first hurdle presented itself shortly after pulling the HBA.  The 2U case only takes half-height PCIe cards, and my bracket was full-height:</p>



<p></p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0368-1024x768.jpg" alt="" class="wp-image-341" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0368-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0368-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0368-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0368-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0368.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>full-height</figcaption></figure>



<p>Fortunately, by some miracle, I managed to track down the shorter bracket in a box somewhere:</p>



<p></p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0369-1024x768.jpg" alt="" class="wp-image-342" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0369-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0369-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0369-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0369-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0369.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>short bracket</figcaption></figure>



<p>The U-NAS looks a little sad when empty:</p>



<p></p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0371-1024x768.jpg" alt="" class="wp-image-343" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0371-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0371-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0371-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0371-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0371.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>empty</figcaption></figure>



<hr class="wp-block-separator"/>



<h2>The Issues</h2>



<p>No build of mine EVER goes off without a hitch.  It&#8217;s the curse of being a Murphy.  </p>



<p>Some of them, I can plan for:</p>



<ul><li>The backplane of this server is SAS2.  My HBA is SAS3.  So I made sure to have a <a href="https://www.amazon.com/gp/product/B01FHNGLK2/ref=as_li_tl?ie=UTF8&amp;tag=blogkroyio10-20&amp;camp=1789&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=B01FHNGLK2&amp;linkId=064d5a7305c39d15e7edef9e9759e0d6">SFF-8643-&gt;SFF-8087 cable </a>on hand.  </li><li>The backplane of the server is an &#8220;A&#8221; backplane.  This means it has internal breakouts.  The short explanation here is that I need at least 3 SAS ports for all 12 bays to work, and I only have two.  So I made sure to order an Intel SAS Expander when I ordered the case.</li><li>There wasn&#8217;t going to be room for the SAS expander to plug into the motherboard.  So back to the old <a href="https://www.amazon.com/gp/product/B06XGTM694/ref=as_li_tl?ie=UTF8&amp;tag=blogkroyio10-20&amp;camp=1789&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=B06XGTM694&amp;linkId=9602b432cb44985d056d84fd3ec54c71">&#8220;powered riser&#8221;</a> trick, which I made sure to order.</li></ul>



<p>Some of them though, I did not plan for.  Like the Flex-ATX motherboard being way too short for this case.  That mean the 24 pin power and fan cables were all too short:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0372-1-768x1024.jpg" alt="" class="wp-image-344" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0372-1-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0372-1-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0372-1-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0372-1-850x1134.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0372-1.jpg 872w" sizes="(max-width: 768px) 100vw, 768px" /><figcaption>too short</figcaption></figure>



<p>I actually had a <a href="https://www.amazon.com/gp/product/B000FL60AI/ref=as_li_tl?ie=UTF8&amp;tag=blogkroyio10-20&amp;camp=1789&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=B000FL60AI&amp;linkId=a365e70d7fbde09e74750d1303731f1b">24 pin atx extender</a> on hand from another project, but I had to wait for a few days for some <a href="https://www.amazon.com/gp/product/B0788Q4TND/ref=as_li_tl?ie=UTF8&amp;tag=blogkroyio10-20&amp;camp=1789&amp;creative=9325&amp;linkCode=as2&amp;creativeASIN=B0788Q4TND&amp;linkId=10b5d383f47655e4599dfaece64af1cc">four pin fan extensions</a> to arrive:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0373-1-1024x768.jpg" alt="" class="wp-image-345" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0373-1-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0373-1-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0373-1-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0373-1-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0373-1.jpg 1551w" sizes="(max-width: 1024px) 100vw, 1024px" /><figcaption>atx extender</figcaption></figure>



<p>The final issue I had was that the powered riser took a molex connector, and based on where I had to place the SAS expander, there was no way in hell that a molex connector would reach.  So I had to order <a href="https://amzn.to/2oUzu1b">a molex extension cable</a> as well.</p>



<hr class="wp-block-separator"/>



<h2>Build complete</h2>



<p>Once all the extra cables arrived, the server finally went together smoothly:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0384-1-768x1024.jpg" alt="" class="wp-image-347" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0384-1-768x1024.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0384-1-225x300.jpg 225w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0384-1-300x400.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0384-1-850x1134.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/10/IMG_0384-1.jpg 872w" sizes="(max-width: 768px) 100vw, 768px" /><figcaption>Complete server</figcaption></figure>



<p>Notice the rockstar placement of the SAS expander.</p>



<p>The final piece of the puzzle was that no matter what I did, the CPU ran VERY hot.  So I used the old trick of placing a fan on top of the heatsink  (picture was from when I did it prior).</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image.png" alt="" class="wp-image-346"/><figcaption>Fan on top of CPU<br></figcaption></figure>



<p>Finally all racked up:</p>



<figure class="wp-block-image"><img src="https://blog.kroy.io/wp-content/uploads/2019/10/image-1.png" alt="" class="wp-image-348" srcset="https://blog.kroy.io/wp-content/uploads/2019/10/image-1.png 682w, https://blog.kroy.io/wp-content/uploads/2019/10/image-1-300x199.png 300w" sizes="(max-width: 682px) 100vw, 682px" /></figure>



<p>Overall, I&#8217;m pretty satisfied.  It&#8217;s a little loud, but not terribly. And this is a server that&#8217;s not powered on full-time.</p>



<p>To be continued on the <a href="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1521/">D-1521</a>.</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&amp;linkname=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F10%2F07%2Fthe-great-rack-migration-d1518%2F&#038;title=The%20Great%20Rack%20Migration%20%E2%80%93%20D1518" data-a2a-url="https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1518/" data-a2a-title="The Great Rack Migration – D1518"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2019/10/07/the-great-rack-migration-d1518/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">337</post-id>	</item>
		<item>
		<title>A New Switch for a New Day</title>
		<link>https://blog.kroy.io/2019/01/30/a-new-switch-for-a-new-day/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=a-new-switch-for-a-new-day</link>
					<comments>https://blog.kroy.io/2019/01/30/a-new-switch-for-a-new-day/#comments</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Thu, 31 Jan 2019 02:02:28 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[Networking]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2019/01/30/a-new-switch-for-a-new-day/</guid>

					<description><![CDATA[I am constantly on the hunt for new switches. &#160;Between finding the right combination of power consumption, noise, and 10Gb, it seems like there is always something new on the&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&#038;title=A%20New%20Switch%20for%20a%20New%20Day" data-a2a-url="https://blog.kroy.io/2019/01/30/a-new-switch-for-a-new-day/" data-a2a-title="A New Switch for a New Day"></a></p>
<p>I am constantly on the hunt for new switches. &nbsp;Between finding the right combination of power consumption, noise, and 10Gb, it seems like there is always something new on the horizon.</p>



<hr class="wp-block-separator"/>



<p>In business, for years my go-to switch has been the Cisco 2960x. &nbsp;While I often hear &#8220;Nobody ever got fired for buying Cisco&#8221;, my relationship with these 2960x switches has been tumultuous to say the least.</p>



<p>They seem prone to rather unique hardware failures. &nbsp;And it always seems to run fine until either a firmware upgrade, or even just a simple reload on the switch. &nbsp;The latest one occurred when I tried to bring home a de-commed 2960x unit, and I was presented with an <a href="https://conetrix.com/blog/cisco-ios-v15-bug-unauthorized-sofware-on-a-cisco-2960x-switch">error message </a>basically suggesting I had stolen the switch or the firmware.</p>



<p>Of course that is false. &nbsp;The stupid switch was covered under SmartNET until about a year ago, and the firmware is a universal image. &nbsp;And it had been running fine until the previous day. &nbsp;And dealing with the Cisco TAC on an uncovered switch&#8230; is just not fun, as it seems the remedy to this particular problem is a replacement.</p>



<hr class="wp-block-separator"/>



<p>I still needed a switch at home (I am running out of ports), and more importantly, I need to replace some stacks of switches in data-centers that look a little like this:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/image.png" alt="" class="wp-image-54" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/image.png 627w, https://blog.kroy.io/wp-content/uploads/2019/08/image-300x78.png 300w" sizes="(max-width: 627px) 100vw, 627px" /></figure>



<p>Yes. &nbsp;That&#8217;s terrible, but I&#8217;m scared as hell to touch them. &nbsp;As mentioned above, these switches like to fail, and they tend to do it on reboots. &nbsp;</p>



<hr class="wp-block-separator"/>



<p>So I started going down the list of vendors to use:</p>



<ul><li>Cisco. &nbsp;Well, I&#8217;m a bit burned on them for this level of switch. &nbsp;Plus, if I can avoid dropping $4-6000 per switch stack, that would be okay.</li><li>Unifi. &nbsp;Eww</li><li>Mikrotik. &nbsp;I like these switches, but no stacking and not enough ports.</li><li>HP/Juniper/etc. &nbsp;Somewhat of the same problem as Cisco. &nbsp;I&#8217;m not saying I&#8217;m trying to cheap-out, but if I could get some quality gear and not drop thousands that would be a bonus.</li></ul>



<h1 id="enterthes390048t4s">Enter the S3900-48T4S</h1>



<p>I think anybody that is even peripherally in the Networking world has probably heard about FS.com. &nbsp;They are a bit of a knee-jerk reaction when the question is asked &#8220;where do I get cheap and guaranteed compatible optics, DACs, fiber, etc&#8221;. &nbsp;</p>



<p>They also have some switches. &nbsp;Some run Cumulus Linux, while others run their own custom operating system. &nbsp;My problem, and why I had never considered them before was pretty simple. &nbsp;Perception.</p>



<p>You see, around Reddit from time-to-time these switches get recommended. &nbsp;But the recommendations are always just tossed out there at random, by accounts with little or no history other than recommending the switches. &nbsp;Point being, the recommendations come across as <em>VERY </em>paid-shill<em>.</em></p>



<p>After a few emails with the FS rep, I decided to take a chance and order a switch for testing. &nbsp;It came from Seattle, so four days later (should have been three, thanks FedEx), it arrived, a little beat up but generally safe:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/image-1.png" alt="" class="wp-image-55" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/image-1.png 1010w, https://blog.kroy.io/wp-content/uploads/2019/08/image-1-300x214.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/image-1-768x547.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/image-1-850x606.png 850w" sizes="(max-width: 1010px) 100vw, 1010px" /></figure>



<p>I tore into the box and found everything one would expect with a new switch. &nbsp;Rack ears, a grounding wire, DB9-&gt;RJ45, and a pair of power cables:</p>



<figure class="wp-block-image kg-card kg-image-card"><img src="https://blog2.kroy.io/wp-content/uploads/2019/01/IMG_0432-1024x768.jpg" alt="s3900 switch" class="wp-image-52" srcset="https://blog.kroy.io/wp-content/uploads/2019/01/IMG_0432-1024x768.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/01/IMG_0432-300x225.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/01/IMG_0432-768x576.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/01/IMG_0432-850x637.jpg 850w, https://blog.kroy.io/wp-content/uploads/2019/01/IMG_0432.jpg 1291w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<hr class="wp-block-separator"/>



<h2 id="thenittygrittydetails">The nitty gritty details</h2>



<p>The switch itself, from a fashion perspective, is actually somewhat boring. &nbsp;A lot of my gear is Mikrotik, so I&#8217;m used to a bit of aesthetic. &nbsp;But let&#8217;s face it, I&#8217;m here for function, not form. &nbsp;Otherwise, this switch is fairly comparable to the 2960x switches I&#8217;ve been using.</p>



<ul><li>$410 shipped to my door. That&#8217;s a pretty great price for a new, stackable, silent, power-sipping switch.</li><li>48 GbE RJ45 ports.</li><li>4xSFP+ 10GbE ports.</li><li>RJ45 console. Used my regular old Cisco rollover here.</li><li>Dual power-supplies.</li><li>Stackable</li></ul>



<p>While eventually I will be stacking, I&#8217;m not currently. &nbsp;It turns out the stacking on this switch just uses the last two SFP+ ports. &nbsp;Far from a deal-breaker, but I like the idea of dedicated stacking modules so you have access to all four SFP+ ports. &nbsp;Obviously that would have bumped up the price a little.</p>



<p>Some details when it&#8217;s running:</p>



<ul><li>Other than a few seconds at startup, basically silent.</li><li>40 watts measured with a Kill-a-watt. It seems to be fairly stable no matter the load, but I haven&#8217;t stress-tested it too much yet. The dual PSUs seem to run in a main/backup configuration. The main pulls around 39 watts. The backup PSU runs just at a single watt.</li><li>Boots and is passing data in around a minute. Let&#8217;s just say that&#8217;s not the case with the 2960x switches I&#8217;ve been using.</li></ul>



<hr class="wp-block-separator"/>



<h2 id="softwareandconfiguration">Software and Configuration</h2>



<p>To be honest, the configuration side of things was where I was a bit worried. &nbsp;With Cisco&#8217;s IOS, anything you might want to do is a simple web search away. &nbsp;As I&#8217;ve discovered, the S3900-48T4S runs FSOS, which for all practical purposes, might as well be IOS. &nbsp;</p>



<p>This switch also supports L2+, meaning it can handle basic routing tasks. &nbsp;The 2960x was limited to 16 static routes, and I couldn&#8217;t figure out how many this switch handles. &nbsp;But with summary routes, it&#8217;s usually a bit of a moot point for how I manage routing. &nbsp;</p>



<p>The original firmware on the switch was a bit wonky. &nbsp;For example, it was <code>configure</code> instead of <code>configure terminal</code> or <code>conf t</code> like someone might be accustomed to. &nbsp;There were a number of other oddities like that, that upgrading the firmware to the latest version seemed to resolve. &nbsp;The original firmware seemed to be for a S5600, which means under the hood, all these switches are probably the same:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/image-3.png" alt="" class="wp-image-56" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/image-3.png 614w, https://blog.kroy.io/wp-content/uploads/2019/08/image-3-300x93.png 300w" sizes="(max-width: 614px) 100vw, 614px" /></figure>



<h4 id="quirksthativeruninto">Quirks that I&#8217;ve run into</h4>



<ul><li>SSH access requires DSA. Just eww. I talked to support, and it sounds like it might be something that can be fixed. The end result was something like this in my .ssh/config file for the host:</li></ul>



<pre class="wp-block-code"><code>      KexAlgorithms diffie-hellman-group1-sha1
      Ciphers aes128-cbc,3des-cbc,aes192-cbc,aes256-cbc
      HostKeyAlgorithms= ssh-dss</code></pre>



<ul><li>You don&#8217;t need to add VLANs to the local VLAN database first like you would on IOS. Adding tagged and untagged VLANs to interfaces will automatically manage this. This was a surprise (and somewhat annoying) until I noticed what was happening. Stuff in the VLAN database would automatically change without me doing anything. I consider this a huge quality-of-life improvement after I figured out what it was doing.</li><li>Interacting with Port-channels automatically modifies the underlying interfaces. For example, on this config for a LACP trunk, other than the <code>channel-group</code> config, all these commands were originally entered on the <code>interface port-channel 1</code>:</li></ul>



<pre class="wp-block-code"><code> interface ethernet 1/51
     no negotiation
     switchport mtu 9216
     switchport mode trunk
     switchport allowed vlan add 1-4000 tagged
     channel-group 1 mode auto
    !
    interface ethernet 1/52
     no negotiation
     switchport mtu 9216
     switchport mode trunk
     switchport allowed vlan add 1-4000 tagged
     channel-group 1 mode auto
    !
    interface port-channel 1
    !</code></pre>



<p>Again, that could be something that might be considered a quality-of-life improvement.</p>



<hr class="wp-block-separator"/>



<p>The switch also has what I would consider to be a fairly competent HTML GUI. &nbsp;The comparable WebUI on a 2960X is generally considered to be a bit of a joke, but the one on this switch is usable. &nbsp;HTTPs management with a custom SSL certificate.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/image-2-1024x312.png" alt="" class="wp-image-57" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/image-2-1024x312.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/image-2-300x91.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/image-2-768x234.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/image-2-850x259.png 850w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<hr class="wp-block-separator"/>



<h1 id="conclusion">Conclusion</h1>



<p>So far, I&#8217;m pretty satisfied with this switch. &nbsp;Any questions I&#8217;ve had or problems I&#8217;ve run into have been answered promptly by FS&#8217;s support. &nbsp;At this point I&#8217;ll continue stress testing it and playing with different configurations to decide if it&#8217;s worth replacing a bunch of Cisco with them.</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&amp;linkname=A%20New%20Switch%20for%20a%20New%20Day" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2019%2F01%2F30%2Fa-new-switch-for-a-new-day%2F&#038;title=A%20New%20Switch%20for%20a%20New%20Day" data-a2a-url="https://blog.kroy.io/2019/01/30/a-new-switch-for-a-new-day/" data-a2a-title="A New Switch for a New Day"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2019/01/30/a-new-switch-for-a-new-day/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">32</post-id>	</item>
		<item>
		<title>Building a ZFS on Linux Fileserver</title>
		<link>https://blog.kroy.io/2018/07/16/building-a-zfs-on-linux-fileserver/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=building-a-zfs-on-linux-fileserver</link>
					<comments>https://blog.kroy.io/2018/07/16/building-a-zfs-on-linux-fileserver/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Tue, 17 Jul 2018 04:54:00 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[ZFS]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2018/07/16/building-a-zfs-on-linux-fileserver/</guid>

					<description><![CDATA[After my recent migration back to ZFS on Linux, I decided to roll my own GUI for server reporting/management. Unfortunately, as referenced in the above linked post, I recently picked&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&#038;title=Building%20a%20ZFS%20on%20Linux%20Fileserver" data-a2a-url="https://blog.kroy.io/2018/07/16/building-a-zfs-on-linux-fileserver/" data-a2a-title="Building a ZFS on Linux Fileserver"></a></p>
<p>After my <a href="/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/">recent migration</a> back to ZFS on Linux, I decided to roll my own GUI for server reporting/management.</p>



<hr class="wp-block-separator"/>



<p>Unfortunately, as referenced in the above linked post, I recently picked up some 10TB Seagate drives that refuse to be stable in any ZFS array, except on Linux.  It&#8217;s worth mentioning that running them on Linux seems to be the fix, as they&#8217;ve been 100% stable for weeks now.</p>



<p>While I was a VERY early adopter of ZFS on Linux, in recent years I&#8217;ve avoided it.  I think part of the reason is the lack of a GUI.</p>



<p>While I don&#8217;t need or want a GUI for configuration, for reporting it&#8217;s more than helpful.  Scanning lines and lines of text for things like smart status is absolutely no fun.</p>



<p>I&#8217;ve tried OMV, but I really wasn&#8217;t a fan of the interface.  It ultimately represents a lot of bloat and most of it I don&#8217;t have much use for.</p>



<hr class="wp-block-separator"/>



<h1 id="thecore">The Core</h1>



<p>At the core of the new system is Debian Stretch.  I initially tried Ubuntu 18.04, but I found NFS on Ubuntu has a problem.  I believe locking to be broken, as I was having problems with Gitlab that has otherwise been running flawlessly over NFS under FreeNAS, OMV, OmniOS CE, and finally bare Debian.  There were also other strange locking issues (with ESXi) that I wasn&#8217;t able to resolve until switching to Debian (which I guess OMV is).</p>



<p>Other than that, the software stack is simple:</p>



<ul><li>Debian Stretch with backports.  Needed because the ZFS version on Stretch is ancient (.0.6.5).  Backports gets version .0.7.9-3.</li><li>zfs-zed.  Again from backports.  Allows notification of ZFS events (drive failures, scrubs, etc).</li><li><a href="https://github.com/jimsalterjrs/sanoid">sanoid/syncoid</a>.  Simple method of setting up automatic ZFS snapshot management and replication.</li><li>NFS.  Pretty straightforward.  Despite using NFS for YEARS, I never really understood NFSv4.  I finally took the opportunity to learn how the <code>fsid</code> works.</li><li>Samba.  Again, straightforward.  I mainly use this for ISOs exports to Supermicro IPMIs and Time Machine.</li><li>smartmontools.  Smart monitoring for the connected drives.</li><li>Glaces.  This is a great system monitor that has a wonderful web-based API, needed for tapping into for reporting.</li><li>LIO for iSCSI.  iSCSI on Linux is&#8230; annoying, for reasons I&#8217;ll mention in a few lines.</li><li>PHP7.2 (from a PPA), Smarty (php templating system), nginx, and a nice template from <a href="https://bootstrapmade.com/">Bootstrapmade</a>.  Despite any abilities with code, I am completely unable to make something look appealing.</li></ul>



<p>I don&#8217;t really have a problem with configuring any of this from the command-line.  Most of the things represent a handful of lines of configuration at most.</p>



<p>LIO is simple enough to use, but it took me some time to figure out WHICH iSCSI implementation I should actually be using.  There are a number of iSCSI implementations on Debian and they are all active and available. The other ones  are mostly maintained for backwards compatibility I think.</p>



<p>The interface for LIO is targetcli, which has a distinct DOS-like feel.  It also supports things like tab-completion, which is helpful if you&#8217;ve never used it before:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/lio-1.png" alt="" class="wp-image-63" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/lio-1.png 836w, https://blog.kroy.io/wp-content/uploads/2019/08/lio-1-300x214.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/lio-1-768x548.png 768w" sizes="(max-width: 836px) 100vw, 836px" /></figure>



<hr class="wp-block-separator"/>



<h1 id="thegui">The GUI</h1>



<p>I&#8217;ve tried (successfully and unsuccessfully) to make web GUIs for server management and reporting in the past.  It&#8217;s usually not a lot of fun.  The hacks required to pull data from the variety of sources generally just makes for super ugly code.  For this project,  I discovered Glances.</p>



<p>If you&#8217;ve never used Glances before, at its core, it&#8217;s almost just a &#8220;top/htop&#8221; replacement.  But it also provides a nice web interface that is capable of spitting out JSON.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/glances-1024x134.png" alt="" class="wp-image-64" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/glances-1024x134.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/glances-300x39.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/glances-768x101.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/glances-850x112.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/glances.png 1790w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>Of course, this makes it disgustingly easy to create a web application that is capable of pulling all manner of statistics.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/glances_api-1024x79.png" alt="" class="wp-image-65" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/glances_api-1024x79.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_api-300x23.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_api-768x60.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_api-850x66.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_api.png 1792w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>That means with a few lines of JQuery,</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/glances_js_api.png" alt="" class="wp-image-66" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/glances_js_api.png 879w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_js_api-300x230.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_js_api-768x588.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/glances_js_api-850x651.png 850w" sizes="(max-width: 879px) 100vw, 879px" /></figure>



<p>and using that nice template I mentioned, voilà, a simple dashboard:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/dashboard_10gb-1024x698.png" alt="" class="wp-image-67" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_10gb-1024x698.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_10gb-300x204.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_10gb-768x523.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_10gb-850x579.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_10gb.png 1312w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/dashboard_cpu-1-1024x689.png" alt="" class="wp-image-68" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_cpu-1-1024x689.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_cpu-1-300x202.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_cpu-1-768x517.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_cpu-1-850x572.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/dashboard_cpu-1.png 1423w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3 id="disks">Disks</h3>



<p>A big reason for buildling this application is to easily monitor smart stats and disk health.  Which is something else glances doesn&#8217;t cover.  I imagine there&#8217;s a plugin available for it, but it&#8217;s easy enough to pull and parse smartctl output:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/drives-1024x767.png" alt="" class="wp-image-69" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/drives-1024x767.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/drives-300x225.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/drives-768x576.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/drives-850x637.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/drives.png 1461w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3 id="zfs">ZFS</h3>



<p>Anything ZFS related is outside of the scope of glances.  I did check around for a third-party plugin a bit, but was unable to find anything.  Which means the ARC section:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/arc.png" alt="" class="wp-image-70"/></figure>



<p>Needs to come from my own code.  Fortunately, this is data that&#8217;s easily accessible:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/arc_code.png" alt="" class="wp-image-71" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/arc_code.png 649w, https://blog.kroy.io/wp-content/uploads/2019/08/arc_code-300x185.png 300w" sizes="(max-width: 649px) 100vw, 649px" /></figure>



<p>Similar code builds the pool topologies, data structures, health and more from running <code>zpool status</code>/<code>zpool list</code>/etc:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/zfspool-1024x628.png" alt="" class="wp-image-72" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/zfspool-1024x628.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/zfspool-300x184.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/zfspool-768x471.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/zfspool-850x521.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/zfspool.png 1469w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>And while sanoid works perfectly, sometimes its nice to be able to visualize snapshots (and remove some manual ones):</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/zfssnapshots-1024x721.png" alt="" class="wp-image-73" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/zfssnapshots-1024x721.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/zfssnapshots-300x211.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/zfssnapshots-768x541.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/zfssnapshots-850x599.png 850w, https://blog.kroy.io/wp-content/uploads/2019/08/zfssnapshots.png 1440w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h2 id="theend">The end</h2>



<p>In all, I am far more satisfied with this setup than any of the ZFS systems I&#8217;ve run in a long time.  FreeNAS always felt like a crapshoot whether an update was going to implode my setup, and the support was non-existent when something went wrong in OmniOS.</p>



<p><a href="https://gfycat.com/ifr/DesertedEsteemedIcterinewarbler">The dashboard in motion</a></p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&amp;linkname=Building%20a%20ZFS%20on%20Linux%20Fileserver" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F16%2Fbuilding-a-zfs-on-linux-fileserver%2F&#038;title=Building%20a%20ZFS%20on%20Linux%20Fileserver" data-a2a-url="https://blog.kroy.io/2018/07/16/building-a-zfs-on-linux-fileserver/" data-a2a-title="Building a ZFS on Linux Fileserver"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2018/07/16/building-a-zfs-on-linux-fileserver/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">30</post-id>	</item>
		<item>
		<title>The ZFS walk-of-shame with Seagate and OmniOS CE.</title>
		<link>https://blog.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=the-zfs-walk-of-shame-with-seagate-and-omnios-ce</link>
					<comments>https://blog.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Sat, 07 Jul 2018 08:32:00 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[ZFS]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/</guid>

					<description><![CDATA[This is a bit of a long one, so I’ll put this first. The TL;DR Opinion #1: OmniOS and Napp-IT are nice, but there’s a good chance it’s not worth&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&#038;title=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." data-a2a-url="https://blog.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/" data-a2a-title="The ZFS walk-of-shame with Seagate and OmniOS CE."></a></p>
<p>This is a bit of a long one, so I’ll put this first.</p>



<p>The TL;DR</p>



<p>Opinion #1: OmniOS and Napp-IT are nice, but there’s a good chance it’s not worth the headache.</p>



<p>There is absolutely little to zero support, and even with some Enterprise hardware that is potentially only 4 years old now, the driver support isn’t there.</p>



<p>Opinion #2: Don&#8217;t buy 10TB Seagate IronWolf drives.  They will probably not work in most ZFS setups, unless you are running ZFS on Linux. I’m pretty sure both the regular and Pro versions have broken firmware when used in ZFS pools.</p>



<p>FreeNAS and OmniOS are both affected with no real resolution in sight, but at least so far, Linux seems stable. And Seagate support isn’t much help.</p>



<hr class="wp-block-separator"/>



<p>After a few weeks of testing, a few months ago I migrated all my ZFS pools over to OmniOS CE using Napp-IT for a GUI.</p>



<p>As a long-time ZFS user, I’ve grown to loathe FreeNAS, and the big ZFS GUI for Linux is in OMV, and that’s not great.</p>



<p>For the most part, I’ve been reasonably satisfied with the OmniOS setup. My biggest complaint (prior to my problems) is that Solaris is just so different from Linux/FreeBSD. There’s just not a lot of documentation, so any minor issues take a lot of trudging to figure out.</p>



<p>I really do love a few things about it. How NFS and SMB are configured are glorious compared to something like FreeNAS. And Comstar is an incredible piece of software for managing iSCSI.</p>



<p>A major annoyance is that it will sometimes fail to complete booting, necessitating a reboot. Apparently this is an ancient Solaris bug that’s still hanging out in illumos.</p>



<hr class="wp-block-separator"/>



<p>So a simple reboot for a software update often results in needing to reboot two or three times. And this happened both in VM installs that I’ve tried and on multiple different hardware platforms.</p>



<p>Other than that, all was fine until about a month ago when I added four 10TB Seagate IronWolf drives as two additional mirrored vdevs. Specifically model number ST10000VN0004, but some searching tells me the 10TB IronWolf Pro is probably impacted too.</p>



<p>Four brand new drives, and within a few days they ALL started to throw timeouts, which eventually resulted in them getting offlined and kicked out of the pool until a reboot. I came dangerously close to losing the whole pool more than once.</p>



<p>Fortunately, the last OmniOS CE update introduced a new killer feature, vdev removal. Using this feature, I was able to remove the two new vdevs, get my pool back to stability. Or so I thought.</p>



<p>The problem is that now my pool was anything but stable. Random checksum errors, transport errors on the drives, basically everything scary that you don’t want to see.</p>



<p>I tried:</p>



<ul><li>Three different HBAs, one brand new</li><li>Different cables, SFF8088.</li><li>Different SA120s and enclosures with breakout cables</li><li>This is an array of 10TB Seagate Enterprise drives, and a mix of 6/8TB IronWolf drives, and every one of them pass SMART. The errors aren’t even tied to specific drives, just on the pool in general.</li></ul>



<p>So I have two issues. The unstable original pool and the broken new 10TB Seagates.</p>



<p>In trying to troubleshoot the Seagates, I hooked them up to different SAS expanders, HBAs, even directly to the SATA ports on the motherboard. The dropouts continued under every ZFS implementation except Linux. And since I’m not using them in a “supported” NAS, there’s not any help from Seagate Support.</p>



<hr class="wp-block-separator"/>



<p>Note that I’ve been using almost exclusively IronWolf drives for years, 6/8TB Pro/non-Pro, and I’ll say they’ve been some of the most reliable drives I’ve ever used. So it’s disappointing that Seagate support won’t do anything with the 10TB drives when it’s clearly a firmware problem. I’m running almost half a petabyte of Seagate storage, and these drives are the ONLY ones that have issues.</p>



<p>There’s a few posts about these 10TB drives on the FreeNAS forums and  on Reddit. The fix currently is to buy Western Digital drives (ewww), or run ZoL.</p>



<p>Anyway, after almost a month of messing around with it (and wasting a pile of cash on different HBAs, expanders and cables, to try and troubleshoot both problems), I’ve basically come to the conclusion that the vdev device removal is buggy and triggered all my stability issues.</p>



<hr class="wp-block-separator"/>



<p>So I did what any sane person would do.</p>



<p>I grabbed a spare R330 SFF from production , loaded it up with a bunch of SSDs for VM storage, a brand new Intel x540 10Gb card, and a brand new 9207-8e.  All with the intention of migrating my data over to a whole new pool, before giving the loaner hardware back.</p>



<p>One word. FAIL. With OmniOS, and the H330 that is in the R330, any attempt to migrate VMs off the server results in the “mr_sas” driver causing a kernel panic. This a year old bug that’s been reported with no fix in sight.</p>



<p>So now I had a terabyte of VMs stuck on a datastore and I couldn’t get them off. The second a migration in vCenter was attempted, the box kernel-panicked.</p>



<p>After three days of working on it, I finally figured out I could copy them manually to a single-spinner 2TB datastore, over a 1Gbps link, to prevent the load (or lack of) from triggering the kernel panic. Almost a literal week later&#8230;</p>



<hr class="wp-block-separator"/>



<p>So here I am. I have:</p>



<ul><li>a previously rock-solid pool of drives exhibiting failure symptoms on OmniOS CE</li><li>Four brand new 10TB drives connected to the loaner R330 that have been running a test pool on Ubuntu. I’ve been subjecting this pool to load for the last 5 days with precisely zero dropouts.</li><li>Four gallon freezer bags full of SAS/SATA cards/expanders/adapters/parts/cables purchased in the last month.</li></ul>



<p>That leads me to the simple conclusion that it’s time to go back to ZFS on Linux. At this point I’m stuck with the new 10TB drives, and I need them to be stable.</p>



<hr class="wp-block-separator"/>



<p>This morning, I started the migration back. Unfortunately the OmniOS CE ZFS version has a ton of feature flags that haven&#8217;t/possibly won&#8217;t make it back to Linux and FreeNAS.</p>



<p>Because of vdev removal on the source pool, I’m able to copy a bunch of data, remove a mirror on the original pool, add the mirror to the new pool on Linux.</p>



<p>This is almost a 300TB pool, so unfortunately this is the only reliable way to migrate the pool without investing in a ton more drives. The downside is that it&#8217;s going to greatly unbalance the disks in the pool. The early ones are going to have most of the data on them, which will kill some performance.</p>



<p>Since I’m running the new server on bare metal Ubuntu, I’m probably going to end up writing at least some sort of simple reporting GUI for the server.</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&amp;linkname=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2018%2F07%2F07%2Fthe-zfs-walk-of-shame-with-seagate-and-omnios-ce%2F&#038;title=The%20ZFS%20walk-of-shame%20with%20Seagate%20and%20OmniOS%20CE." data-a2a-url="https://blog.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/" data-a2a-title="The ZFS walk-of-shame with Seagate and OmniOS CE."></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2018/07/07/the-zfs-walk-of-shame-with-seagate-and-omnios-ce/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">29</post-id>	</item>
		<item>
		<title>Building a Disk Tower, for all pain and no profit</title>
		<link>https://blog.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=building-a-disk-tower-for-pain-and-no-profit</link>
					<comments>https://blog.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Wed, 02 May 2018 22:49:09 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[ZFS]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/</guid>

					<description><![CDATA[In my lab, more than anything, quiet and power-sipping are the two factors that matter most to me. That means most of my servers are towers instead of rack-mount gear.&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&#038;title=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" data-a2a-url="https://blog.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/" data-a2a-title="Building a Disk Tower, for all pain and no profit"></a></p>
<p>In my lab, more than anything, quiet and power-sipping are the two factors that matter most to me.  That means most of my servers are towers instead of rack-mount gear.</p>



<hr class="wp-block-separator"/>



<p>So when a recent post on <a href="https://www.reddit.com/r/DataHoarder/comments/7z7q1j/my_new_diy_15_bay_das_more_info_in_comments/">/r/datahoarder</a> outlined shoving 15 drives into a DVD duplicator tower, I jumped all over the idea.</p>



<p>One thing I didn&#8217;t want was to be forced to run multiple SFF-8088 cables.  So early-on, I decided a SAS expander was needed.</p>



<h3 id="partslist">Parts List</h3>



<ul><li>Copystars 9 Bay Duplicator case ($80 new on eBay)</li><li>HP SAS Expander ($18 used on eBay).  This is the one with the SFF-8088 port on the back</li><li>Some random SAS-&gt;SATA breakout cables ($12 new for a pair on eBay)</li><li>SeaSonic M12II-620 EVO, 620W modular PSU ($60 new from Newegg)</li><li>A way to turn on the PSU without a motherboard.  A bright orange switch ($7 on Amazon)</li><li>A pair of Rosewill 3 x 5.25-Inch to 4 x 3.5-Inch bays ($50 each from Newegg)</li><li>Powered PCIe riser ($10 Amazon)</li></ul>



<p>Right away you might notice that I only ordered enough enclosures for eight drive bays.  Initially, that was all that I needed.  My long term plan was to be able to turn one of the 5.25&#8243; bays into 6 or 8 2.5&#8243; docks for SSDs.</p>



<p>I ordered the Rosewill bays because of the fans on them.  Most of the other 3.5&#8243; drive bays had VERY small fans on them.  I&#8217;ve had some cooling problems in the past, and I wanted to make sure my new DAS didn&#8217;t have any issues.</p>



<h4 id="thepartsarrive">The parts arrive</h4>



<p>I feel like this project was doomed from the start.  As the parts started to arrive, there were immediate problems:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/geuPRlM.png" alt="fail
" class="wp-image-118" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/geuPRlM.png 586w, https://blog.kroy.io/wp-content/uploads/2019/08/geuPRlM-225x300.png 225w" sizes="(max-width: 586px) 100vw, 586px" /></figure>



<p>That&#8217;s a surface-mount capacitor on the HP SAS Expander.  It was floating around in the bag.  While it probably would have worked, I wasn&#8217;t willing to risk data to it.  So without a working SAS expander, which was going to take another week to arrive, about all I could do was assemble the rest of the case.</p>



<hr class="wp-block-separator"/>



<h2 id="grrrthecase">Grrr, the case&#8230;</h2>



<p>So I don&#8217;t know why, but I ordered the Copystars case instead of the BestDuplicator case mentioned in the Datahoarders reddit post above.  There is almost NO room in the Copystars case, whereas the BestDuplicator has <a href="https://imgur.com/a/CRYg1Xe">room for days</a>.  The only nice thing about the Copystars case is that it has CONSIDERABLY more cooling in it, due to a pair of nice big (and relatively silent) fans.</p>



<p>While I had planned on needing to replace the PSU, the one that shipped with this Copystars case was truly dreadful:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/YlDw1a4.png" alt="original psu" class="wp-image-119" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/YlDw1a4.png 728w, https://blog.kroy.io/wp-content/uploads/2019/08/YlDw1a4-300x225.png 300w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<p>300w, with 15A on the 12 volt rail.  Nowhere near enough for even 8 drives.</p>



<p>Unfortunately, even with the stock PSU, I don&#8217;t think it would have been possible to fit the SAS Expander (which is HUGE).  Nor would the final set of drive bays be available.  So enter the velcro:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/mNQ8S5t.png" alt="guts showing expander" class="wp-image-120" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/mNQ8S5t.png 728w, https://blog.kroy.io/wp-content/uploads/2019/08/mNQ8S5t-300x226.png 300w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<hr class="wp-block-separator"/>



<h2 id="needmoreparts">Need more parts!</h2>



<p>While I was waiting for a new SAS expander, Seagate_Surfer on Reddit responded to a <a href="https://www.reddit.com/r/homelab/comments/8deebx/cautionary_tale_on_why_buying_enterprise_drives/">post</a> I wrote about the potential pitfalls of buying Enterprise drives on Amazon.  Due to the generosity of Seagate, I had some brand new 10TB drives on the way!!</p>



<hr class="wp-block-separator"/>



<p>I want to take this moment to shill for Seagate a little.  I&#8217;ve bought TONS (in the hundreds) of drives over the years.  For many of those years, I was exclusively buying Western Digital Reds and was constantly forced to RMA them at the 1.5 year mark.  Upwards of 20% or more.</p>



<p>Since I started buying Seagates, I&#8217;ve had zero RMAs.  Even the drives from the aforementioned post above were just starting to throw errors, they hadn&#8217;t even failed yet.</p>



<p>I really do feel Seagate took care of me by honoring a warranty that they were under absolutely no requirement to honor.  They&#8217;ve got a customer for life in me, both for personal and in business.</p>



<hr class="wp-block-separator"/>



<p>Of course this meant I needed to fill in the third set of drive bays, so it was off to Amazon for another Rosewill kit.</p>



<p>I decided because of the limited SAS lanes available over a single cable, putting 2.5&#8243; bays in this case for SSDs probably didn&#8217;t make sense.  Because of that, I also picked up an SFF-8088 to SFF-8087 cable.  With how I was required to mount the SAS expander in the case, my original plan of just a straight SFF-8088 cable wasn&#8217;t going to work.</p>



<p>A few days later, everything arrived and was mounted.</p>



<p>Cable gore:<br><br></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/M7KalRX-742x1024.jpg" alt="building" class="wp-image-121" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/M7KalRX-742x1024.jpg 742w, https://blog.kroy.io/wp-content/uploads/2019/08/M7KalRX-217x300.jpg 217w, https://blog.kroy.io/wp-content/uploads/2019/08/M7KalRX-768x1060.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/M7KalRX.jpg 889w" sizes="(max-width: 742px) 100vw, 742px" /></figure>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/32MrdMQ.jpg" alt="moar building" class="wp-image-122" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/32MrdMQ.jpg 728w, https://blog.kroy.io/wp-content/uploads/2019/08/32MrdMQ-222x300.jpg 222w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<p>Not perfect but it works:<br></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/ZwrL7uj.jpg" alt="PSU mount" class="wp-image-123" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/ZwrL7uj.jpg 728w, https://blog.kroy.io/wp-content/uploads/2019/08/ZwrL7uj-218x300.jpg 218w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<p>I hate that this cable isn&#8217;t removable, but it&#8217;s what worked for now:<br></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/BlYaYIT.jpg" alt="psu with sas cable" class="wp-image-124" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/BlYaYIT.jpg 728w, https://blog.kroy.io/wp-content/uploads/2019/08/BlYaYIT-222x300.jpg 222w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<p>Doesn&#8217;t really look too bad:<br></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/0nHaIR8.jpg" alt="built" class="wp-image-125" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/0nHaIR8.jpg 728w, https://blog.kroy.io/wp-content/uploads/2019/08/0nHaIR8-223x300.jpg 223w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<p>At this point, I had gone through 2 Expanders, ordered an extra set of SFF-8087-&gt;8088 cables and an additional set of drive bays.  And this project was well into its third week.</p>



<h1 id="allofthefailures">All of the failures</h1>



<p>Once everything was installed, I immediately fired it up and started plugging in drives.</p>



<p><em>NOTHING</em></p>



<p>Nothing was detected.  The lights on the drive bays came on, but OmniOS never registered drives as being connected.  And of course I had sealed up the case because I blindly assumed everything would work.</p>



<p>After much plugging and replugging, I determined the SAS expander was bad. So it was back to eBay for a new SAS expander.  This time I went with the IBM ServeRAID.</p>



<p>A week later, it arrived:<br></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/S7IVOYD-1024x763.jpg" alt="" class="wp-image-126" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/S7IVOYD-1024x763.jpg 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/S7IVOYD-300x223.jpg 300w, https://blog.kroy.io/wp-content/uploads/2019/08/S7IVOYD-768x572.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/S7IVOYD.jpg 1188w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>And was installed:<br></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/3vQbqzQ-624x1024.jpg" alt="cable gore" class="wp-image-127" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/3vQbqzQ-624x1024.jpg 624w, https://blog.kroy.io/wp-content/uploads/2019/08/3vQbqzQ-183x300.jpg 183w, https://blog.kroy.io/wp-content/uploads/2019/08/3vQbqzQ.jpg 728w" sizes="(max-width: 624px) 100vw, 624px" /></figure>



<p>The design of this card makes it a bit more difficult to shove the third set of bays all the way in, but it fit (potato pic):</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/3usxvEg.png" alt="more cable gore
" class="wp-image-128" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/3usxvEg.png 728w, https://blog.kroy.io/wp-content/uploads/2019/08/3usxvEg-233x300.png 233w" sizes="(max-width: 728px) 100vw, 728px" /></figure>



<h1 id="morefailures">More Failures</h1>



<p>With the new SAS expander, plugging in drives caused them to start showing up in OmniOS.  But as with everything in this project, one step forward resulted in two steps back.</p>



<p>In two of the Rosewill enclosures, the third drive bay was bad and refused to connect.  Note that one of these came from Newegg, and one of them came from Amazon, which means it&#8217;s probably a common problem with the enclosure.  So while I continued to use them, I started the replacement process</p>



<p>The bigger concern was actually the apparent failure of one of my Seagate IronWolf drives.  These things are built like <em>TANKS</em> and I had never seen problems before on <strong>DOZENS</strong> of them.</p>



<p>But ZFS was throwing checksum errors and smart tests started getting aborted:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/KhhyHph.png" alt="smart problems" class="wp-image-129" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/KhhyHph.png 688w, https://blog.kroy.io/wp-content/uploads/2019/08/KhhyHph-300x65.png 300w" sizes="(max-width: 688px) 100vw, 688px" /></figure>



<p>The hard and transfer error counters were rising:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/yrNsQL8.png" alt="hard/transfer errors" class="wp-image-130" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/yrNsQL8.png 814w, https://blog.kroy.io/wp-content/uploads/2019/08/yrNsQL8-300x14.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/yrNsQL8-768x35.png 768w" sizes="(max-width: 814px) 100vw, 814px" /></figure>



<p>And the UDMA CRC Error count was going up and up</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/xRPOBQO.png" alt="udma crc" class="wp-image-131" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/xRPOBQO.png 649w, https://blog.kroy.io/wp-content/uploads/2019/08/xRPOBQO-300x23.png 300w" sizes="(max-width: 649px) 100vw, 649px" /></figure>



<p>Some quick googling told me this was probably due to a bad cable, and sure enough, swapping the SATA connection from the dead drive bay to the drive throwing errors caused all the problems to go away.</p>



<p>I&#8217;ve found those breakout cables to be a little fragile.  So I guess I&#8217;m not surprised that one of them failed in all my shuffling between replacing the expander and trying to troubleshoot why the third bays in two of the enclosures were bad.</p>



<p>So back to Amazon for another SAS-&gt;SATA breakout cable.</p>



<h1 id="thecasualtylist">The Casualty List</h1>



<p>I ordered more breakout cables (and ordered extras just to be safe), and Amazon has replaced the failed Rosewill enclosure.  I&#8217;m now almost a month into this project, and while the DAS is stable and I&#8217;m using it, I&#8217;m still waiting on Newegg for a replacment for the final piece.</p>



<p>The list of failed parts so far:</p>



<ul><li>Two HP SAS Expanders.</li><li>Two Rosewill 4&#215;3.5 in 3&#215;5.25 drive bays.</li><li>SFF-8087 -&gt; 4xSATA breakout cable.</li><li>My sanity.</li></ul>



<h3 id="theresult">The result:</h3>



<p>Potato pic (no idea why my camera keeps being blurry):</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/LRLNnk7-766x1024.jpg" alt="potato finished product" class="wp-image-132" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/LRLNnk7-766x1024.jpg 766w, https://blog.kroy.io/wp-content/uploads/2019/08/LRLNnk7-224x300.jpg 224w, https://blog.kroy.io/wp-content/uploads/2019/08/LRLNnk7-768x1027.jpg 768w, https://blog.kroy.io/wp-content/uploads/2019/08/LRLNnk7.jpg 844w" sizes="(max-width: 766px) 100vw, 766px" /></figure>



<p>The drives in this array:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/lGf30Mq.png" alt="devices" class="wp-image-133" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/lGf30Mq.png 330w, https://blog.kroy.io/wp-content/uploads/2019/08/lGf30Mq-300x181.png 300w" sizes="(max-width: 330px) 100vw, 330px" /></figure>



<p>and temps:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/ZV6jAgI.png" alt="temps" class="wp-image-134" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/ZV6jAgI.png 597w, https://blog.kroy.io/wp-content/uploads/2019/08/ZV6jAgI-300x102.png 300w" sizes="(max-width: 597px) 100vw, 597px" /></figure>



<p>Obligatory blinkenlights, with an idea of how loud it is:</p>



<div style="width:100%;height:0px;position:relative;padding-bottom:56.250%;"><figure><iframe src="https://streamable.com/s/ob5uf/cfomck" frameborder="0" width="100%" height="100%" allowfullscreen="" style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe></figure></div>



<h1 id="conclusion">Conclusion</h1>



<p>After all of this, I have a 12 bay DAS that is:</p>



<ul><li>basically silent from more than a few feet away</li><li>pulls about 20 watts without any disks</li><li>still has a dead drive bay until Newegg responds to my return request</li></ul>



<p>Would I do it again?</p>



<figure><iframe src="https://giphy.com/embed/98C4E2HeR4NBm" width="480" height="480" frameborder="0" class="giphy-embed" allowfullscreen=""></iframe></figure>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&amp;linkname=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2018%2F05%2F02%2Fbuilding-a-disk-tower-for-pain-and-no-profit%2F&#038;title=Building%20a%20Disk%20Tower%2C%20for%20all%20pain%20and%20no%20profit" data-a2a-url="https://blog.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/" data-a2a-title="Building a Disk Tower, for all pain and no profit"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2018/05/02/building-a-disk-tower-for-pain-and-no-profit/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">27</post-id>	</item>
		<item>
		<title>Monitoring Home Power Consumption for less than $25</title>
		<link>https://blog.kroy.io/2017/12/19/monitoring-home-power-consumption-for-less-than-25/?utm_source=rss&#038;utm_medium=rss&#038;utm_campaign=monitoring-home-power-consumption-for-less-than-25</link>
					<comments>https://blog.kroy.io/2017/12/19/monitoring-home-power-consumption-for-less-than-25/#respond</comments>
		
		<dc:creator><![CDATA[Kroy]]></dc:creator>
		<pubDate>Tue, 19 Dec 2017 22:34:16 +0000</pubDate>
				<category><![CDATA[HomeLab]]></category>
		<category><![CDATA[RTLSDR]]></category>
		<guid isPermaLink="false">https://blog2.kroy.io/2017/12/19/monitoring-home-power-consumption-for-less-than-25/</guid>

					<description><![CDATA[On almost a daily basis, I am bombarded with ads on Facebook for the Sense. This device allows you to monitor whole-home power consumption. I could probably find room for&#8230;]]></description>
										<content:encoded><![CDATA[<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&#038;title=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" data-a2a-url="https://blog.kroy.io/2017/12/19/monitoring-home-power-consumption-for-less-than-25/" data-a2a-title="Monitoring Home Power Consumption for less than $25"></a></p>
<p>On almost a daily basis, I am bombarded with ads on Facebook for the <a href="https://sense.com/">Sense</a>.  This device allows you to monitor whole-home power consumption.</p>



<p>I could probably find room for such a device in the budget, but I <em>HATE</em> electricity.  Too many years of geeky endeavors have resulted in far too many shocks, and mains electricity scares the hell out of me.  That discounted the possibility of hooking some kind of sensor to a Raspberry Pi and directly measure the mains.</p>



<p>After I thought about it a bit, I realized it would be extremely simple to do something similar without any wires or hassle.</p>



<hr class="wp-block-separator"/>



<h1 id="rtlsdr">RTL-SDR</h1>



<p>As I considered how I could accomplish this task, I came to a realization.  At least where I live, I haven&#8217;t seen a &#8220;meter reader&#8221; in at least a couple of decades.  This meant at least once a month, the power company was somehow retrieving my usage in an automated fashion.</p>



<p>Some research told me that the power company accomplishes this via a simple radio broadcast on the 900Mhz spectrum.  Once again, it was a task for the RTL-SDR that I use for a number of projects.</p>



<p>The RTL-SDR is just a cheap software-defined radio that can be had for less than $25 on Amazon with an antenna.  It can used for everything from monitoring cheap temperature and humidity sensors, tracking airplanes, and apparently, reading my own power meter.</p>



<p>The software is readily available for all flavors of Linux, and simple to install and use.</p>



<hr class="wp-block-separator"/>



<h1 id="meterreading">Meter Reading</h1>



<p>It turns out, at least in the United States, most meters can be read using <a href="https://github.com/bemasher/rtlamr">this software</a>.  Don&#8217;t get me wrong, manually decoding radio packets isn&#8217;t necessarily difficult, but it makes me glad that some kind soul has done the legwork for this already.</p>



<p>And with one simple command, I was reading the power (and probably water) meters for my entire neighborhood:</p>



<p><code>~/gocode/bin/rtlamr -msgtype=idm --format=json -msgtype=scm+</code></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/neighborhood-1-1024x523.png" alt="" class="wp-image-138" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/neighborhood-1-1024x523.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/neighborhood-1-300x153.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/neighborhood-1-768x392.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/neighborhood-1.png 1500w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>I&#8217;m not going to lie.  It felt weird polling the meter readings for the entire neighborhood.  Out of the five different protocol types (&#8216;msgtype&#8217; option to  rtlamr), four of them were in use in my neighborhood, and I had access to hundreds of meters.</p>



<hr class="wp-block-separator"/>



<h1 id="thehuntbegins">The Hunt Begins</h1>



<p>Once I was able to poll meters, it became a hunt for the proverbial needle-in-a-haystack to find my meter.  Amazingly, this was the longest part of the whole endeavor and ended up taking almost three hours.  There were a number of impediments to this goal:</p>



<ol><li>The meters only report every few minutes, and sometimes sporadically, instead of even on a set schedule.  So it becomes a matter of weeding through a few hundred readings to try and pick out your own.  Some meters will report two or three times for a single report on another.  This becomes important later for why this isn&#8217;t the best option for an instantaneous &#8220;Hey my house is currently using 150 Wh&#8221; reading.</li><li>In my neighborhood, there are four different protocols in use. This meant I had to repeat the first step for all four protocols.</li><li>The reading that&#8217;s reported when you look at the physical meter isn&#8217;t the same reading that&#8217;s reported wirelessly.</li></ol>



<p>That third point is obviously a huge problem when you are flying blind.  My meter was reading 55,151 kWh, so my eyes were scanning for a five digit number in the mess.  And of course searching the output wasn&#8217;t helping because by the time I got a reading (due to point #1 above), the number had moved.</p>



<p>Of course this is when I realized that the wireless reading from the meter was reporting in daWh (that&#8217;s decawatt/hours). With that knowledge, I was able to identify my own meter.  Fortunately, the rtlamr binary provides a simple way to filter by a specific unit, output json, and grab a single packet:</p>



<p><code>~/gocode/bin/rtlamr -msgtype=idm --format=json --filterid=XXXXXXX --single=true</code></p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/myreading-1-1024x126.png" alt="" class="wp-image-139" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/myreading-1-1024x126.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/myreading-1-300x37.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/myreading-1-768x94.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/myreading-1-1600x197.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p><code>55422.79 kWh</code> used since my meter was replaced a few years ago.  I imagine there is some other useful information in there, like the PowerOutageFlags, DifferentialConsumptionLevels, and more.  But for now, I had my reading.</p>



<hr class="wp-block-separator"/>



<h1 id="graphallthethings">Graph All the Things!</h1>



<p>Once I had JSON output, the sky is the limit for what can be accomplished.  My first reaction was to drop it in InfluxDB and use Grafana.  Unfortunately this method of reading the meter doesn&#8217;t really lend itself well to constant polling.  There are a few important things to notice in the following output:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/inconsistent.png" alt="" class="wp-image-140" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/inconsistent.png 651w, https://blog.kroy.io/wp-content/uploads/2019/08/inconsistent-300x81.png 300w" sizes="(max-width: 651px) 100vw, 651px" /></figure>



<ul><li>The readings didn&#8217;t actually change between every report.  For example, three successive readings might be the same (despite many watt/hours in use), but only the fourth reading would report the ultimate change.</li><li>The time between reports really inconsistent.  One time would be two minutes, the next would be a single minute. I imagine it&#8217;s done this way to stagger out the signals in a neighborhood so they aren&#8217;t clambering over one another.  This meant my RTL-SDR was constantly polling for meter reading, which broke my temperature/humidity sensors for my fridge, monitoring the basement for water, and more.</li></ul>



<p>While I&#8217;ve seen some nice looking Grafana graphs, most of the time I really don&#8217;t think they look that nice. Sometimes they remind me a bit of &#8220;rrdgraph&#8221;.</p>



<p>Functional, sure, but they really just look terrible compared to a modern HTML5 graphing library. Not to mention, I always waste a ton of time fighting with Grafana trying to get it to even report &#8220;sane&#8221; numbers.</p>



<p>This also immediately discounted the idea of creating some sort of instantaneous usage report.  The meter wasn&#8217;t changing often enough to even get a minute-by-minute report. So I ditched Grafana and went with a simple relational database and some PHP.</p>



<hr class="wp-block-separator"/>



<h1 id="phpsqlite3andjquery">PHP, SQLite3, and JQuery</h1>



<p>I use PHP.  There, I admitted it.  For heavy projects, I prefer something different.  But as I&#8217;ve been using PHP professionally since the PHP/FI days, it lends itself to extremely rapid development. And at least for quick and dirty home-tasks where I&#8217;m starting from scratch every time, some spectacularly ugly code.</p>



<p>That&#8217;s why I usually don&#8217;t post code examples, because I don&#8217;t care how anybody could do it better, why my code sucks, is a security blight or whatever else. It&#8217;s quick (I&#8217;ve only got a few hours of time in the code of this project), it&#8217;s dirty, it usually gets super creepy and crufty as I change directions 42 times, and I&#8217;m not exposing it to the Internet.  With that warning out of the way&#8230;</p>



<hr class="wp-block-separator"/>



<h2 id="datacollection">Data Collection</h2>



<p>I decided I wanted a relational database, but didn&#8217;t want to mess with some heavy daemon.  While it&#8217;s running on my &#8220;collection&#8221; host, an N3700 with an SSD in it, at some point in the future this could run off a Raspberry Pi. SQLite3 was the only choice as it is lightweight and fast.</p>



<p>A simple cron script set up to run every hour on the hour captures the meter reading:</p>



<pre class="wp-block-code"><code>$unitid = XXXXXX;
$type= "idm";

exec("/scripts/gocode/bin/rtlamr -msgtype={$type} --format=json --filterid={$unitid} --single=true",$output);
$arr = json_decode(implode("\n",$output),true);
$meter_reading = $arr['Message']['LastConsumptionCount'];

if ($meter_reading > 1) {
     $r = new \reading($meter_reading);
}</code></pre>



<p>And the class that actually does the heavy lifting</p>



<pre class="wp-block-code"><code>class reading {

         private $db = null;
         private $reading = 0;

         private function getDb() {
             $db = new SQLite3(dirname(__FILE__) . '/whole_home_electricity.sqlite3');
             $db->query("CREATE TABLE IF NOT EXISTS byhour (id INTEGER PRIMARY KEY ASC, ymd integer, hour tinyint, reading bigint,last_difference integer,UNIQUE(ymd,hour))");
             $db->query("CREATE TABLE IF NOT EXISTS byday (id INTEGER PRIMARY KEY ASC, ymd integer, reading bigint,last_difference integer,UNIQUE(ymd))");
             $db->query("CREATE TABLE IF NOT EXISTS bymonth (id INTEGER PRIMARY KEY ASC, ym integer, reading bigint,last_difference integer,UNIQUE(ym))");
             $db->query("CREATE TABLE IF NOT EXISTS byweek (id INTEGER PRIMARY KEY ASC, year integer, week tinyint, reading bigint,last_difference integer,UNIQUE(year,week))");
             return $db;
         }

         private function getLastReading($table) {
             $ld_res = $this->db->query("select * from {$table} order by id desc limit 1");
             if ($ld_row = $ld_res->fetchArray()) {
                 return $this->reading-$ld_row['reading'];
             }
             return 0;

         }

         public function __construct($reading) {
             $this->db = $this->getDb();
             $this->reading = $reading;


             $ym = date("Ym");
             $year = date("Y");
             $week = date("W");
             $ymd = date("Ymd");
             $hour = date("H");

             //By Hour
             $res = $this->db->query("select * from byhour where ymd={$ymd} and hour={$hour}");
             if (!$row = $res->fetchArray()) {
                 $last_difference = $this->getLastReading("byhour");
                 $ins=$this->db->prepare("insert into byhour (ymd,hour,reading,last_difference) values (:ymd,:hour,:reading,:last_difference)");
                 $ins->bindValue(':ymd', date("Ymd"), SQLITE3_INTEGER);
                 $ins->bindValue(':hour', date("G"), SQLITE3_INTEGER);
                 $ins->bindValue(':reading', $this->reading, SQLITE3_INTEGER);
                 $ins->bindValue(':last_difference', $last_difference, SQLITE3_INTEGER);
                 @$ins->execute();
             }
             //End By Hour


             //By Day
             $res = $this->db->query("select * from byday where ymd={$ymd}");
             if (!$row = $res->fetchArray()) {
                 $last_difference = $this->getLastReading("byday");
                 $ins=$this->db->prepare("insert into byday (ymd,reading,last_difference) values (:ymd,:reading,:last_difference)");
                 $ins->bindValue(':ymd', $ymd, SQLITE3_INTEGER);
                 $ins->bindValue(':reading', $this->reading, SQLITE3_INTEGER);
                 $ins->bindValue(':last_difference', $last_difference, SQLITE3_INTEGER);
                 @$ins->execute();
             }
             //End Day
             //
             //
             
             //By Week
             $res = $this->db->query("select * from byweek where year={$year} and week={$week}");
             if (!$row = $res->fetchArray()) {
                 $last_difference = $this->getLastReading("byweek");
                 $ins=$this->db->prepare("insert into byweek (year,week,reading,last_difference) values (:year,:week,:reading,:last_difference)");
                 $ins->bindValue(':year', $year, SQLITE3_INTEGER);
                 $ins->bindValue(':week', $week, SQLITE3_INTEGER);
                 $ins->bindValue(':reading', $this->reading, SQLITE3_INTEGER);
                 $ins->bindValue(':last_difference', $last_difference, SQLITE3_INTEGER);
                 @$ins->execute();
             }
             //End Week
             
             //continues for month, and eventually year
             
             
             //While we are at it, back everything up with "versioning"
             //Backup

             if (file_exists("/mnt/Backups/backup_mounted")) {
                 for ($i = 48; $i > 0; $i--) {
                     $a = $i - 1;
                     rename("/mnt/Backups/analog/whole_home_electricity/whole_home_electricity.sqlite3.{$a}", "/mnt/Backups/analog/whole_home_electricity/whole_home_electricity.sqlite3.{$i}");
                 }
                 rename("/mnt/Backups/analog/whole_home_electricity/whole_home_electricity.sqlite3","/mnt/Backups/analog/whole_home_electricity/whole_home_electricity.sqlite3.0");
                 copy(dirname(__FILE__) . '/whole_home_electricity.sqlite3',"/mnt/Backups/analog/whole_home_electricity/whole_home_electricity.sqlite3");
             }</code></pre>



<p>The theory behind this is simple.  Once an hour, pull a reading.  If a reading doesn&#8217;t exist for the current day, hour, week, month, year, pull the last reading, grab the difference, and store it.</p>



<h5 id="weirdalert">Weird alert</h5>



<p>This does create an oddity as the datapoint for <code>20171217 09</code> actually represents the data for <code>08:00-09:00</code>.  Similarly this occurs for day, week, and month.  It&#8217;s not a huge problem, but it just means that when I pull a day&#8217;s worth of data, I pull where the <code>hour&gt;0</code> and then the following day&#8217;s <code>hour=0</code>.  It&#8217;s just a slight modification on the output.  One of those crufty things born out of a change of direction that I should probably go back and change (but never will).</p>



<h1 id="theoutput">The Output</h1>



<p>The output is just a simple HTML5 page that calls a json-generating PHP script via JQuery/ajax.  The result ends up looking something like this:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2017/12/bgpower-1024x518.png" alt="power" class="wp-image-137" srcset="https://blog.kroy.io/wp-content/uploads/2017/12/bgpower-1024x518.png 1024w, https://blog.kroy.io/wp-content/uploads/2017/12/bgpower-300x152.png 300w, https://blog.kroy.io/wp-content/uploads/2017/12/bgpower-768x388.png 768w, https://blog.kroy.io/wp-content/uploads/2017/12/bgpower-1600x809.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>I&#8217;ve used all sorts of frameworks and APIs over the years, but I can&#8217;t speak highly enough of <a href="https://canvasjs.com/">CanvasJS</a>.</p>



<p>It&#8217;s not free, and I&#8217;ll probably end up buying a license so I can use it here and elsewhere.  It&#8217;s by far the easiest to use and nicest-looking framework for generating graphs I&#8217;ve used in a while.</p>



<p>In any case.  Actual HTML for this is fairly straightforward:</p>



<pre class="wp-block-code"><code>&lt;!DOCTYPE HTML>
&lt;html>
&lt;head>
&lt;link href="css/jquery-ui.1.11.2.min.css" rel="stylesheet" />
&lt;script src="js/jquery-1.11.1.min.js">&lt;/script>
&lt;script src="js/jquery-ui.1.11.2.min.js">&lt;/script>
&lt;script>

//https://stackoverflow.com/questions/19491336/get-url-parameter-jquery-or-how-to-get-query-string-values-in-js
$.urlParam = function(name){
    var results = new RegExp('[\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
    if (results) {
        return results[1] || 0;
    }
    return 0;
}

$(document).ready(function(){
    updateByHour();
    updateTheRest();
});

function updateByHour() {
    var postvars = { action: "byhour"};
    if ($.urlParam('byHourDay') != 0) {
        postvars.byHourDay = $.urlParam('byHourDay');
    }

    $.post( "api.php", postvars, function( result) {
        result = $.parseJSON(result);
        points = [];
        $.each(result, function (i,v)
        {
              points.push({y:v, label: i+"h", indexLabelFontColor: "#000000",indexLabelPlacement:"inside", indexLabel:"{y}Wh"});
        });

        chart_title = "Hourly Consumption";
        if (postvars.byHourDay) {
            chart_title += " (" + decodeURIComponent(postvars.byHourDay) + ")";
            $("#goback").fadeIn(600);
        } else {
            chart_title += " (today)";
        }

        var hourOptions= {
        theme: "light2",
        animationEnabled: true,
        title: {
            text: chart_title
        },
        data: [{
            type: "column", //change it to line, area, bar, pie, etc
            dataPoints: points
            }]
    };

    $("#byHourContainer").CanvasJSChart(hourOptions)
    });
}

function refreshByHour(day) {
    if (day) {
        window.history.pushState("", "","/wholehome/index.php?byHourDay=" + day);
    } else {
        window.history.pushState("", "","/wholehome/index.php");
    }
    updateByHour();
}

function updateTheRest() {
    $.post( "api.php", { action: "byday"}, function( result) {
        result = $.parseJSON(result);
        points = [];
        $.each(result, function (i,v)
        {
            points.push({y:v, label: i, indexLabelFontColor: "#000000", indexLabelPlacement:"inside", indexLabel:"{y}kWh", click: function(e) { refreshByHour(i); } });
        });


		var dayOptions= {
			animationEnabled: true,
				theme: "light2",
				title:{
				text: "Daily Consumption"
			},
				axisY2:{
				prefix: "",
	        //				lineThickness: 0
			},
				toolTip: {
				shared: true
			},
				legend:{
				verticalAlign: "top",
				horizontalAlign: "center"
			},
			data: [
				{
					type: "bar",
					name: "Kilowatt/Hour",
					axisYType: "secondary",
					//color: "#A87CA0",
					dataPoints: points
				}
			]};
		$("#byDayContainer").CanvasJSChart(dayOptions);

	});

    $.post( "api.php", { action: "byWeek"}, function( result) {
        result = $.parseJSON(result);
        points = [];
        $.each(result, function (i,v)
        {
            points.push({y:v, label: i, indexLabelFontColor: "#000000", indexLabelPlacement:"inside", indexLabel:"{y}kWh"});
        });


		var monthOptions= {
			animationEnabled: true,
				theme: "light2",
				title:{
				text: "Weekly Consumption"
			},
				axisY2:{
				prefix: "",
	        //				lineThickness: 0
			},
				toolTip: {
				shared: true
			},
				legend:{
				verticalAlign: "top",
				horizontalAlign: "center"
			},
			data: [
				{
					type: "bar",
					name: "Kilowatt/Hour",
					axisYType: "secondary",
					//color: "#A87CA0",
					dataPoints: points
				}
			]};
		$("#byWeekContainer").CanvasJSChart(monthOptions);
    });

    $.post( "api.php", { action: "bymonth"}, function( result) {
        result = $.parseJSON(result);
        points = [];
        $.each(result, function (i,v)
        {
            points.push({y:v, label: i, indexLabelFontColor: "#000000", indexLabelPlacement:"inside", indexLabel:"{y}kWh"});
        });


		var monthOptions= {
			animationEnabled: true,
				theme: "light2",
				title:{
				text: "Monthly Consumption"
			},
				axisY2:{
				prefix: "",
	        //				lineThickness: 0
			},
				toolTip: {
				shared: true
			},
				legend:{
				verticalAlign: "top",
				horizontalAlign: "center"
			},
			data: [
				{
					type: "bar",
					name: "Kilowatt/Hour",
					axisYType: "secondary",
					//color: "#A87CA0",
					dataPoints: points
				}
			]};
		$("#byMonthContainer").CanvasJSChart(monthOptions);

	});
}

&lt;/script>
&lt;/head>
&lt;body >
&lt;h1 style="color:#000000">Kilowattage&lt;/h1> &lt;span id="goback" style="display:none;">&lt;a href='' onclick='refreshByHour(); $("#goback").fadeOut(600); return false;' style="color:#000000">View Today&lt;/a>&lt;/span>&lt;br />
&lt;p>
&lt;div class="resizable" style="height: 370px;border:1px solid gray;">
    &lt;div id="byHourContainer" style="height: 100%; width: 100%;">&lt;/div>&lt;br />
&lt;/div>
&lt;div class="resizable" style="height: 370px;border:1px solid gray;">
    &lt;div id="byDayContainer" style="height: 100%; width: 100%;">&lt;/div>
&lt;/div>
&lt;div class="resizable" style="height: 370px;border:1px solid gray;">
    &lt;div id="byWeekContainer" style="height: 100%; width: 100%;">&lt;/div>
&lt;/div>
&lt;div class="resizable" style="height: 370px;border:1px solid gray;">
    &lt;div id="byMonthContainer" style="height: 100%; width: 100%;">&lt;/div>
&lt;/div>

&lt;/p>
&lt;script src="js/jquery.canvasjs.min.js">&lt;/script>
&lt;/body>
&lt;/html></code></pre>



<p>Without getting bogged down with details, the crux of this is pretty simple:</p>



<p>Check to see if we want to grab a specific day.  This is so I can click on the day and get the specific usage for that day (and reload the chart):</p>



<pre class="wp-block-code"><code>    var postvars = { action: "byhour"};    if ($.urlParam('byHourDay') != 0) {        postvars.byHourDay = $.urlParam('byHourDay');    }</code></pre>



<p>Do an AJAX post to <code>api.php</code>.  Parse out the results and put them in an array of data points:</p>



<pre class="wp-block-code"><code>    $.post( "api.php", postvars, function( result) {
        result = $.parseJSON(result);
        points = [];
        $.each(result, function (i,v)
        {
              points.push({y:v, label: i+"h", indexLabelFontColor: "#000000",indexLabelPlacement:"inside", indexLabel:"{y}Wh"});
        });</code></pre>



<p>Build the chart and change some text around so we know we are looking at a different day</p>



<pre class="wp-block-code"><code>chart_title = "Hourly Consumption";
if (postvars.byHourDay) {
            chart_title += " (" + decodeURIComponent(postvars.byHourDay) + ")";
            $("#goback").fadeIn(600);
        } else {
            chart_title += " (today)";
        }

        var hourOptions= {
        theme: "light2",
        animationEnabled: true,
        title: {
            text: chart_title
        },
        data: [{
            type: "column", //change it to line, area, bar, pie, etc
            dataPoints: points
            }]
    };

    $("#byHourContainer").CanvasJSChart(hourOptions)
    });
}</code></pre>



<p>This repeats for the day, week, month, and eventually year.  With this, I can click on the day under the daily charts, and have it refresh the hourly chart with the new day/</p>



<hr class="wp-block-separator"/>



<h1 id="theapi">The API</h1>



<p>Finally, I needed an API to connect the HTML to the Sqlite3 database.</p>



<p>Stuff like this is where I always end up missing some of the heavier frameworks I&#8217;ve developed and I used on a daily basis.</p>



<p>I&#8217;m just reading the most recent backup copy of my database, to prevent locking issues; I only want to do something if my Backup drive gets mounted:</p>



<pre class="wp-block-code"><code>if (file_exists("/mnt/Backups/backup_mounted")) {
    $usage = new \usage();
    if (!empty($_POST)) {
        if ($_POST['action'] == 'byday') {
            echo json_encode($usage->getByDay());
        }
        if ($_POST['action'] == 'bymonth') {
            echo json_encode($usage->getByMonth());
        }
        if ($_POST['action'] == 'byWeek') {
            echo json_encode($usage->getByWeek());
        }
        if ($_POST['action'] == 'byhour') {
            $byHourDay = strlen($_POST['byHourDay']) > 0 ? urldecode($_POST['byHourDay']) : null;
            echo json_encode($usage->getByHour($byHourDay));
        }
    }
}</code></pre>



<p>Just a simple director.  Call a method depending on URL parameters.</p>



<p>This is where it gets pretty crufty.  I was in the home stretch and just wanted to be done.  Here&#8217;s what some of the functions look like:</p>



<pre class="wp-block-code"><code>class usage {

    private $db = null;

    public function __construct() {
        $this->db = new SQLite3("/mnt/Backups/analog/whole_home_electricity/whole_home_electricity.sqlite3");
    }
    
        public function getByDay($limit = 10) {
        $ret = [];

        $ld_res = $this->db->query("select * from byday order by ymd limit {$limit}");
        while ($ld_data = $ld_res->fetchArray()) {
            $fdate = date("j M Y",strtotime(($ld_data['ymd']-1)));
            
            ##in decawatts, want kilo
            $ret[$fdate] = $ld_data['last_difference']/100;
        }

        ##Add in today's usage since it hasn't been written yet
        $fdate = date("j M Y");
        
        $tot = 0;
        $byhour = $this->getByHour();
        foreach ($byhour as $usage) {
            $tot += $usage;
        }

        ##Swap the watts back to kilo
        $ret[$fdate] = $tot/1000;

        return $ret;
    }

    public function getByHour($date = null) {
    
        ##Pull today if nothing passed in
        if ($date == null) {
            $date = date("Ymd");
        } else {
            //format that guy
            $date = date("Ymd",strtotime($date));
        }
        
        ##This addresses the problem where I am writing the previous hour's data to the current hour
        $tomm = $date+1;

        $ret = [];

        ##Usage is marked current hour when it actually means last hour
        ##so do some fanangling
        $ld_res = $this->db->query("select * from byhour where ((ymd={$date} and hour > 0) || (ymd={$tomm} and hour=0)) order by ymd,hour");
        while ($ld_data = $ld_res->fetchArray()) {
            $hour = $ld_data['hour'] - 1;
            if ($hour &lt; 0) {
                $hour = 23;
            }
            //convert to watts
            $ret[$hour] = $ld_data['last_difference']*10;
        }
        
        ##Fill in blanks spots with "0" in the final output so we have a full 24 hours worth
        for($i=0; $i &lt; 24; $i++) {
            if (!isset($ret[$i])) {
                $ret[$i] = 0;
            }
        }
        ksort($ret);
        return $ret;
    }
    </code></pre>



<p>And that&#8217;s that!</p>



<hr class="wp-block-separator"/>



<h1 id="theresults">The Results</h1>



<p>The end result is a decent looking set of graphs that can be manipulated a bit. I&#8217;ve only just got full data collection going, so it will be a few weeks before the graph truly fills out and becomes interesting.</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/final1-1024x542.png" alt="results
" class="wp-image-141" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/final1-1024x542.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/final1-300x159.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/final1-768x407.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/final1-1600x847.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>And some fun things emerge:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/replication-2-1024x126.png" alt="replication
" class="wp-image-142" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/replication-2-1024x126.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/replication-2-300x37.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/replication-2-768x95.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/replication-2-1600x197.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p>and:</p>



<figure class="wp-block-image"><img src="https://blog2.kroy.io/wp-content/uploads/2019/08/laundry-1024x126.png" alt="laundry" class="wp-image-143" srcset="https://blog.kroy.io/wp-content/uploads/2019/08/laundry-1024x126.png 1024w, https://blog.kroy.io/wp-content/uploads/2019/08/laundry-300x37.png 300w, https://blog.kroy.io/wp-content/uploads/2019/08/laundry-768x94.png 768w, https://blog.kroy.io/wp-content/uploads/2019/08/laundry-1600x197.png 1600w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<hr class="wp-block-separator"/>



<h1 id="endingthoughtsandtodos">Ending thoughts and To-dos</h1>



<p>This was a fun little project that really didn&#8217;t take me much time.  Now that I&#8217;m collecting the data, I&#8217;ll be able to build out the reports a bit more.</p>



<p>The next big thing on my list for this is to include my lab power consumption as a stacked graph, so I can see how much of actual usage is my lab (400+ watts).</p>
<p><a class="a2a_button_facebook" href="https://www.addtoany.com/add_to/facebook?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Facebook" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_twitter" href="https://www.addtoany.com/add_to/twitter?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Twitter" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_reddit" href="https://www.addtoany.com/add_to/reddit?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Reddit" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_linkedin" href="https://www.addtoany.com/add_to/linkedin?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="LinkedIn" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_hacker_news" href="https://www.addtoany.com/add_to/hacker_news?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Hacker News" rel="nofollow noopener" target="_blank"></a><a class="a2a_button_email" href="https://www.addtoany.com/add_to/email?linkurl=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&amp;linkname=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" title="Email" rel="nofollow noopener" target="_blank"></a><a class="a2a_dd addtoany_share_save addtoany_share" href="https://www.addtoany.com/share#url=https%3A%2F%2Fblog.kroy.io%2F2017%2F12%2F19%2Fmonitoring-home-power-consumption-for-less-than-25%2F&#038;title=Monitoring%20Home%20Power%20Consumption%20for%20less%20than%20%2425" data-a2a-url="https://blog.kroy.io/2017/12/19/monitoring-home-power-consumption-for-less-than-25/" data-a2a-title="Monitoring Home Power Consumption for less than $25"></a></p>]]></content:encoded>
					
					<wfw:commentRss>https://blog.kroy.io/2017/12/19/monitoring-home-power-consumption-for-less-than-25/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
		<post-id xmlns="com-wordpress:feed-additions:1">26</post-id>	</item>
	</channel>
</rss>
